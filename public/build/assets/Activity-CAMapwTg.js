import{i as p,q as M,s as R,d as y,o as a,w as x,e,j as l,k as c,F as S,p as D,t as o,l as v,v as k,m as u,n as b,x as w,T as U,f as j,y as I,z as H,A as Y,B as G,S as m,C as N}from"./vendor-B5djolF_.js";import{_ as J}from"./AppLayout-BFBItq3b.js";const K={class:"flex justify-between items-center"},Q={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},W={"aria-label":"Breadcrumb",class:"flex"},X={class:"inline-flex items-center space-x-1 md:space-x-3"},Z={class:"inline-flex items-center"},ee={"aria-current":"page"},te={class:"flex items-center"},se={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},re={class:"py-0 md:py-6"},ae={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},oe={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},ne={class:"flex flex-col md:flex-row h-full"},le={class:"w-full p-6"},de={class:"relative"},ie={key:0,class:"absolute inset-0 bg-white/70 dark:bg-gray-800/70 z-10 flex items-center justify-center"},ue={class:"overflow-x-auto"},ce={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 hidden md:table"},ge={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},me={class:"pl-6 pr-2 py-4 whitespace-nowrap"},xe={class:"text-sm font-medium text-gray-900 dark:text-white"},fe={class:"px-6 py-4 whitespace-nowrap"},pe={class:"flex items-center"},ye={class:"flex-shrink-0 h-10 w-10"},be=["src","alt"],he={key:1,class:"h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center"},_e={class:"ml-4"},ve={class:"text-sm font-medium text-gray-900 dark:text-white"},ke={key:1},we={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},Ce={class:"px-6 py-4"},Se={class:"text-sm text-gray-900 dark:text-white"},De={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},Be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Te={class:"text-xs text-gray-400"},Ae={class:"px-6 py-4 whitespace-nowrap"},Ee={class:"px-6 py-4 whitespace-nowrap"},Le={class:"relative inline-block text-left"},$e=["onClick","aria-expanded"],je={class:"py-1",role:"none"},Ne=["onClick"],Pe=["onClick"],ze={class:"space-y-4 md:hidden"},Fe={class:"flex items-start"},Oe={class:"ml-4 flex-1"},Ve={class:"flex justify-between items-start"},qe={class:"font-medium text-gray-900 dark:text-white"},Me={class:"text-sm text-gray-600 dark:text-gray-300 mt-1"},Re={class:"mt-2 flex items-center text-sm text-gray-500 dark:text-gray-400"},Ue={key:1},Ie={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},He={class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},Ye={key:0,class:"mt-1"},Ge={key:1,class:"text-center py-8"},Je={key:2,class:"mt-6 px-4 py-3 sm:px-6"},Ke={class:"sm:hidden flex justify-between items-center mb-4"},Qe=["disabled"],We={class:"text-sm text-gray-700 dark:text-gray-300"},Xe=["disabled"],Ze={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},et={class:"text-sm text-gray-700 dark:text-gray-300"},tt={class:"font-medium"},st={class:"font-medium"},rt={class:"font-medium"},at={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},lt={__name:"Activity",props:{title:{type:String,required:!0},data:{type:Object,required:!0}},setup(h){const B=h,n=p(B.data.activities||[]);p(B.data.user||null);const g=p(!1),T=r=>{if(!r)return"N/A";const s={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(r).toLocaleDateString(void 0,s)},A=r=>({completed:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",failed:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300","in-progress":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"})[r==null?void 0:r.toLowerCase()]||"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",f=p(null),P=(r,s)=>{s.stopPropagation(),f.value=f.value===r?null:r},_=()=>{f.value=null},E=r=>{r.target.closest(".dropdown-container")||_()};M(()=>{document.addEventListener("click",E)}),R(()=>{document.removeEventListener("click",E)});const C=r=>{!r||g.value||(_(),g.value=!0,new URL(r).searchParams.get("page"),N.get(r,{},{preserveState:!0,preserveScroll:!0,only:["activities"],onSuccess:()=>{g.value=!1;const s=document.querySelector(".activity-table");s&&s.scrollIntoView({behavior:"smooth",block:"start"})},onError:()=>{g.value=!1}}))},z=async r=>{try{const s={ID:r.id,Action:r.action,Description:r.description,Status:r.status,"Created At":r.created_at,User:r.user_name,Department:r.department_name||"N/A",Service:r.service_name||"N/A"},t=Object.entries(s).map(([d,q])=>`${d}: ${q}`).join(`
`);if(navigator.clipboard)await navigator.clipboard.writeText(t);else{const d=document.createElement("textarea");d.value=t,d.style.position="fixed",d.style.opacity="0",document.body.appendChild(d),d.select(),document.execCommand("copy"),document.body.removeChild(d)}m.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:d=>{d.addEventListener("mouseenter",m.stopTimer),d.addEventListener("mouseleave",m.resumeTimer)}}).fire({icon:"success",title:"Activity details copied to clipboard!"})}catch(s){console.error("Failed to copy activity details: ",s),m.fire({icon:"error",title:"Error",text:"Failed to copy activity details",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})}},L=(r,s,t="success")=>{m.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:d=>{d.addEventListener("mouseenter",m.stopTimer),d.addEventListener("mouseleave",m.resumeTimer)}}).fire({icon:t,title:r,text:s})},$=p({}),F=(r,s)=>{r&&($.value[s]=r)},O=r=>{const s=$.value[`button-${r}`];if(!s)return{display:"none"};const t=s.getBoundingClientRect(),i=window.scrollY||document.documentElement.scrollTop;return{position:"fixed",top:`${t.bottom+i}px`,left:`${t.left+t.width-160}px`,width:"160px",zIndex:9999}},V=r=>{m.fire({title:"Confirm Deletion",html:'<div class="text-center"><p class="text-lg font-medium mb-4">Are you sure you want to delete this activity?</p><p class="text-red-600 dark:text-red-400 font-medium">This action cannot be undone!</p></div>',icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:'<i class="fas fa-trash mr-2 text-red-600 dark:text-red-400"></i> Delete',cancelButtonText:"Cancel",buttonsStyling:!0,reverseButtons:!0,focusCancel:!0,customClass:{confirmButton:"px-4 py-2 rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",cancelButton:"px-4 py-2 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",popup:"rounded-lg border border-gray-200 dark:border-gray-700"}}).then(s=>{s.isConfirmed&&N.delete(route("activity.delete",r),{preserveScroll:!0,onSuccess:()=>{L("Success","Activity has been deleted successfully","success")},onError:()=>{L("Error","Failed to delete activity","error")}})})};return(r,s)=>(a(),y(J,{title:h.title},{header:x(()=>[e("div",K,[e("h2",Q,o(h.title),1),e("nav",W,[e("ol",X,[e("li",Z,[j(v(k),{href:r.route("dashboard"),class:"inline-flex items-center text-sm font-medium text-gray-700 dark:text-gray-400 hover:text-green-600 dark:hover:text-green-400"},{default:x(()=>s[2]||(s[2]=[e("i",{class:"fas fa-home mr-2"},null,-1),u(" Dashboard ")])),_:1,__:[2]},8,["href"])]),e("li",ee,[e("div",te,[s[3]||(s[3]=e("i",{class:"fas fa-chevron-right text-gray-400 mx-2"},null,-1)),e("span",se,o(h.title),1)])])])])])]),default:x(()=>[e("div",re,[e("div",ae,[e("div",oe,[e("div",ne,[e("div",le,[e("div",de,[g.value?(a(),l("div",ie,s[4]||(s[4]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-500"},null,-1)]))):c("",!0),e("div",ue,[e("table",ce,[s[9]||(s[9]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," # "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," User "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Details "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Created "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Status "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Action ")])],-1)),e("tbody",ge,[(a(!0),l(S,null,D(n.value.data,t=>(a(),l("tr",{key:t.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",me,[e("div",xe," #"+o(t.id),1)]),e("td",fe,[e("div",pe,[e("div",ye,[t.user_avatar?(a(),l("img",{key:0,src:t.user_avatar,alt:t.user_name,class:"h-10 w-10 rounded-full"},null,8,be)):(a(),l("div",he,s[5]||(s[5]=[e("i",{class:"fas fa-user text-gray-500"},null,-1)])))]),e("div",_e,[e("div",ve,[t.user_id?(a(),y(v(k),{key:0,href:r.route("profile.view",{user_id:t.user_id}),class:"text-green-600 hover:underline"},{default:x(()=>[u(o(t.user_name||"System"),1)]),_:2},1032,["href"])):(a(),l("span",ke,"System"))]),t.department_name?(a(),l("div",we,o(t.department_name),1)):c("",!0)])])]),e("td",Ce,[e("div",Se,o(t.description),1),t.details?(a(),l("div",De,o(t.details),1)):c("",!0)]),e("td",Be,[e("div",Te,o(t.created_at),1)]),e("td",Ae,[e("span",{class:b(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",A(t.status)])},o(t.status||"N/A"),3)]),e("td",Ee,[e("div",Le,[e("div",null,[e("button",{onClick:w(i=>P(t.id,i),["stop"]),type:"button",class:"bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2","aria-expanded":f.value===t.id,"aria-haspopup":"true",ref_for:!0,ref:i=>F(i,`button-${t.id}`)},s[6]||(s[6]=[e("i",{class:"fas fa-ellipsis-v"},null,-1)]),8,$e)]),(a(),y(U,{to:"body"},[j(I,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:x(()=>[H(e("div",{class:"fixed z-[9999] mt-2 w-40 rounded-md shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu",style:Y(O(t.id))},[e("div",je,[e("button",{onClick:w(i=>{z(t),_()},["stop"]),class:"w-full text-left px-4 py-2 text-sm text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 focus:outline-none focus:bg-blue-50 dark:focus:bg-blue-900/30 flex items-center",role:"menuitem",tabindex:"-1"},s[7]||(s[7]=[e("i",{class:"far fa-copy mr-2"},null,-1),u(" Copy ")]),8,Ne),e("button",{onClick:w(i=>{V(t.id),_()},["stop"]),class:"w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 focus:outline-none focus:bg-red-50 dark:focus:bg-red-900/30 flex items-center",role:"menuitem",tabindex:"-1"},s[8]||(s[8]=[e("i",{class:"far fa-trash-alt mr-2"},null,-1),u(" Delete ")]),8,Pe)])],4),[[G,f.value===t.id]])]),_:2},1024)]))])])]))),128))])])]),e("div",ze,[(a(!0),l(S,null,D(n.value.data,t=>(a(),l("div",{key:t.id,class:"bg-white dark:bg-gray-800 rounded-lg shadow p-4"},[e("div",Fe,[e("div",{class:b(["flex-shrink-0 h-12 w-12 rounded-full flex items-center justify-center text-white text-xl",t.color||"bg-blue-500"])},[e("i",{class:b(t.icon||"fas fa-info-circle")},null,2)],2),e("div",Oe,[e("div",Ve,[e("h4",qe,o(t.title),1),e("span",{class:b(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",A(t.status)])},o(t.status||"N/A"),3)]),e("p",Me,o(t.description),1),e("div",Re,[s[10]||(s[10]=e("i",{class:"far fa-user mr-1"},null,-1)),t.user_id?(a(),y(v(k),{key:0,href:r.route("profile.view",{user_id:t.user_id}),class:"text-green-600 hover:underline"},{default:x(()=>[u(o(t.user_name||"System"),1)]),_:2},1032,["href"])):(a(),l("span",Ue,"System"))]),t.department_name?(a(),l("div",Ie,[s[11]||(s[11]=e("i",{class:"far fa-building mr-1"},null,-1)),u(" "+o(t.department_name),1)])):c("",!0),e("div",He,[e("div",null,[s[12]||(s[12]=e("i",{class:"far fa-clock mr-1"},null,-1)),u(" "+o(T(t.created_at)),1)]),t.completed_at?(a(),l("div",Ye,[s[13]||(s[13]=e("i",{class:"far fa-check-circle mr-1"},null,-1)),u(" "+o(T(t.completed_at)),1)])):c("",!0)])])])]))),128))]),n.value.data&&n.value.data.length===0?(a(),l("div",Ge,s[14]||(s[14]=[e("i",{class:"fas fa-inbox text-4xl text-gray-400 mb-2"},null,-1),e("p",{class:"text-gray-500 dark:text-gray-400"},"No activities found",-1)]))):c("",!0),n.value.links&&n.value.links.length>3?(a(),l("div",Je,[e("div",Ke,[n.value.prev_page_url?(a(),l("button",{key:0,onClick:s[0]||(s[0]=t=>C(n.value.prev_page_url)),class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!n.value.prev_page_url||g.value}," Previous ",8,Qe)):c("",!0),e("span",We," Page "+o(n.value.current_page)+" of "+o(n.value.last_page),1),n.value.next_page_url?(a(),l("button",{key:1,onClick:s[1]||(s[1]=t=>C(n.value.next_page_url)),class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!n.value.next_page_url||g.value}," Next ",8,Xe)):c("",!0)]),e("div",Ze,[e("div",null,[e("p",et,[s[15]||(s[15]=u(" Showing ")),e("span",tt,o(n.value.from||0),1),s[16]||(s[16]=u(" to ")),e("span",st,o(n.value.to||0),1),s[17]||(s[17]=u(" of ")),e("span",rt,o(n.value.total||0),1),s[18]||(s[18]=u(" results "))])]),e("div",null,[e("nav",at,[(a(!0),l(S,null,D(n.value.links,(t,i)=>(a(),y(v(k),{key:i,href:t.url||"#",innerHTML:t.label,onClick:w(d=>t.url?C(t.url):null,["prevent"]),class:b(["relative inline-flex items-center px-4 py-2 border text-sm font-medium transition-colors duration-150",{"z-10 bg-green-50 border-green-500 text-green-600 dark:bg-green-900/30 dark:border-green-600 dark:text-green-300":t.active,"bg-white dark:bg-gray-800 border-gray-300 text-gray-500 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700":!t.active&&t.url,"text-gray-400 cursor-not-allowed dark:text-gray-500 border-gray-200 dark:border-gray-600":!t.url,"rounded-l-md":i===0,"rounded-r-md":i===n.value.links.length-1}]),disabled:!t.url||g.value,"aria-current":t.active?"page":void 0,"preserve-scroll":""},null,8,["href","innerHTML","onClick","class","disabled","aria-current"]))),128))])])])])):c("",!0)])])])])])])]),_:1},8,["title"]))}};export{lt as default};
//# sourceMappingURL=Activity-CAMapwTg.js.map

{"version":3,"file":"VerifyMembership-BxYNWgE0.js","sources":["../../../resources/js/Pages/Frontend/VerifyMembership.vue"],"sourcesContent":["<script setup>\nimport { Head, usePage } from \"@inertiajs/vue3\";\nimport { router } from '@inertiajs/vue3';\nimport axios from 'axios';\nimport AuthenticationCard from \"@/Components/AuthenticationCard.vue\";\nimport AuthenticationCardLogo from \"@/Components/AuthenticationCardLogo.vue\";\nimport InputError from \"@/Components/InputError.vue\";\nimport InputLabel from \"@/Components/InputLabel.vue\";\nimport PrimaryButton from \"@/Components/PrimaryButton.vue\";\nimport TextInput from \"@/Components/TextInput.vue\";\nimport { ref, computed, watch, reactive } from 'vue';\n\nconst verificationResult = ref(null);\nconst isLoading = ref(false);\nconst form = reactive({\n    national_id: '',\n    errors: {}\n});\n\n// Reset verification result when national_id changes\nwatch(() => form.national_id, () => {\n    if (verificationResult.value) {\n        verificationResult.value = null;\n    }\n    // Clear errors when typing\n    if (form.errors?.national_id) {\n        form.errors = {};\n    }\n});\n\nconst verify = async () => {\n    isLoading.value = true;\n    verificationResult.value = null;\n    form.errors = {};\n\n    try {\n        const response = await axios.post(route('frontend.verify.membership.request'), {\n            national_id: form.national_id\n        });\n\n        verificationResult.value = response.data;\n    } catch (error) {\n        if (error.response?.status === 404) {\n            verificationResult.value = {\n                success: false,\n                message: error.response.data.message || 'No member found with the provided National ID.'\n            };\n        } else if (error.response?.status === 422) {\n            // Handle validation errors\n            form.errors = error.response.data.errors || {};\n            verificationResult.value = {\n                success: false,\n                message: 'Please correct the errors in the form.'\n            };\n        } else {\n            verificationResult.value = {\n                success: false,\n                message: 'An error occurred while verifying membership. Please try again.'\n            };\n        }\n    } finally {\n        isLoading.value = false;\n    }\n};\n\n// Computed property to determine if we should show the verification form\nconst showVerificationForm = computed(() => {\n    return !verificationResult.value || !verificationResult.value.success;\n});\n\n// Function to reset and verify another ID\nconst verifyAnother = () => {\n    verificationResult.value = null;\n    form.national_id = \"\";\n};\n</script>\n\n<template>\n    <Head title=\"Verify Membership\" />\n\n    <AuthenticationCard>\n        <template #logo>\n            <AuthenticationCardLogo />\n        </template>\n\n        <div class=\"p-2 space-y-4 md:space-y-6 sm:p-8\">\n            <!-- Header -->\n            <h1 class=\"text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white\">\n                Verify Party Membership\n            </h1>\n\n            <!-- Description -->\n            <p class=\"text-sm text-gray-600 dark:text-gray-400\">\n                Enter the National ID number to verify membership status.\n            </p>\n\n            <!-- Error Message -->\n            <div v-if=\"verificationResult && !verificationResult.success\" \n                 class=\"p-4 mb-4 text-sm text-red-700 bg-red-100 rounded-lg dark:bg-red-200 dark:text-red-800\">\n                {{ verificationResult.message }}\n            </div>\n\n            <!-- Verification Form -->\n            <div v-if=\"showVerificationForm\" class=\"space-y-4\">\n                <form @submit.prevent=\"verify\" class=\"space-y-4\">\n                    <!-- National ID Input -->\n                    <div>\n                        <InputLabel for=\"national_id\" value=\"National Identification Number\" />\n                        <TextInput\n                            id=\"national_id\"\n                            v-model=\"form.national_id\"\n                            type=\"text\"\n                            class=\"mt-1 block w-full\"\n                            required\n                            :autofocus=\"!verificationResult\"\n                            placeholder=\"Enter 8-digit National ID\"\n                            maxlength=\"8\"\n                            pattern=\"[0-9]{8}\"\n                            title=\"Please enter exactly 8 digits\"\n                        />\n                        <InputError class=\"mt-2\" :message=\"form.errors.national_id\" />\n                    </div>\n\n                    <!-- Submit Button -->\n                    <div class=\"mt-6\">\n                        <PrimaryButton\n                            class=\"w-full justify-center\"\n                            :class=\"{ 'opacity-25': form.processing }\"\n                            :disabled=\"form.processing || isLoading\"\n                        >\n                            <span v-if=\"isLoading\">Verifying...</span>\n                            <span v-else>Verify Membership</span>\n                        </PrimaryButton>\n                    </div>\n                </form>\n            </div>\n\n            <!-- Verification Result -->\n            <div v-if=\"verificationResult?.success\" class=\"mt-6\">\n                <div class=\"flex justify-between items-center mb-4\">\n                    <h2 class=\"text-xl font-semibold text-gray-900 dark:text-white\">Verification Result</h2>\n                    <button\n                        @click=\"verifyAnother\"\n                        class=\"text-sm text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300\"\n                    >\n                        Verify Another ID\n                    </button>\n                </div>\n                \n                <div :class=\"{\n                    'bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800': verificationResult.data.status_code === 'active',\n                    'bg-yellow-50 border-yellow-200 dark:bg-yellow-900/20 dark:border-yellow-800': ['pending', 'processing'].includes(verificationResult.data.status_code),\n                    'bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800': verificationResult.data.status_code === 'rejected'\n                }\" class=\"border rounded-lg p-4\">\n                    <h3 :class=\"{\n                        'text-green-800 dark:text-green-200': verificationResult.data.status_code === 'active',\n                        'text-yellow-800 dark:text-yellow-200': ['pending', 'processing'].includes(verificationResult.data.status_code),\n                        'text-red-800 dark:text-red-200': verificationResult.data.status_code === 'rejected',\n                    }\" class=\"text-lg font-medium mb-3\">\n                        <template v-if=\"verificationResult.data.status_code === 'active'\">\n                            ‚úì Membership Active\n                        </template>\n                        <template v-else-if=\"verificationResult.data.status_code === 'pending'\">\n                            ‚è≥ Membership Pending Review\n                        </template>\n                        <template v-else-if=\"verificationResult.data.status_code === 'processing'\">\n                            üîÑ Membership Processing\n                        </template>\n                        <template v-else-if=\"verificationResult.data.status_code === 'rejected'\">\n                            ‚ùå Membership Rejected\n                        </template>\n                        <template v-else>\n                            ‚ÑπÔ∏è Membership Status: {{ verificationResult.data.status }}\n                        </template>\n                    </h3>\n                    \n                    <div class=\"space-y-3\">\n                        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div>\n                                <p class=\"text-sm text-gray-500 dark:text-gray-400\">Full Name</p>\n                                <p class=\"font-medium\">{{ verificationResult.data.name }}</p>\n                            </div>\n                            <div>\n                                <p class=\"text-sm text-gray-500 dark:text-gray-400\">National ID</p>\n                                <p class=\"font-mono\">{{ verificationResult.data.national_id }}</p>\n                            </div>\n                        </div>\n                        \n                        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div>\n                                <p class=\"text-sm text-gray-500 dark:text-gray-400\">Membership Status</p>\n                                <span \n                                    :class=\"{\n                                        'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200': verificationResult.data.status_code === 'active',\n                                        'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200': ['pending', 'processing'].includes(verificationResult.data.status_code),\n                                        'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200': verificationResult.data.status_code === 'rejected'\n                                    }\"\n                                    class=\"px-2 py-1 text-xs font-medium rounded-full\"\n                                >\n                                    {{ verificationResult.data.status }}\n                                </span>\n                            </div>\n                            <div>\n                                <p class=\"text-sm text-gray-500 dark:text-gray-400\">Registration Number</p>\n                                <p class=\"font-mono\">{{ verificationResult.data.registration_number || 'N/A' }}</p>\n                            </div>\n                        </div>\n                        \n                        <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                            <div>\n                                <p class=\"text-sm text-gray-500 dark:text-gray-400\">County</p>\n                                <p>{{ verificationResult.data.county }}</p>\n                            </div>\n                            <div>\n                                <p class=\"text-sm text-gray-500 dark:text-gray-400\">Constituency</p>\n                                <p>{{ verificationResult.data.constituency }}</p>\n                            </div>\n                            <div>\n                                <p class=\"text-sm text-gray-500 dark:text-gray-400\">Ward</p>\n                                <p>{{ verificationResult.data.ward }}</p>\n                            </div>\n                        </div>\n                        \n                        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div>\n                                <p class=\"text-sm text-gray-500 dark:text-gray-400\">Registration Date</p>\n                                <p>{{ verificationResult.data.registration_date }}</p>\n                            </div>\n                            <div>\n                                <p class=\"text-sm text-gray-500 dark:text-gray-400\">Last Verified</p>\n                                <p>{{ verificationResult.data.last_verified }}</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                \n                <!-- Print Button -->\n                <div class=\"mt-4 flex justify-end\">\n                    <button\n                        type=\"button\"\n                        @click=\"window.print()\"\n                        class=\"inline-flex items-center px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md font-semibold text-xs text-gray-700 dark:text-gray-300 uppercase tracking-widest shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-25 transition ease-in-out duration-150\"\n                    >\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z\" />\n                        </svg>\n                        Print Verification\n                    </button>\n                </div>\n            </div>\n        </div>\n    </AuthenticationCard>\n</template>\n\n<style scoped>\n@media print {\n    .no-print {\n        display: none !important;\n    }\n    \n    body {\n        background: white !important;\n        color: black !important;\n    }\n    \n    .bg-white {\n        background-color: white !important;\n    }\n    \n    .text-gray-900 {\n        color: black !important;\n    }\n    \n    .border-gray-200 {\n        border-color: #e5e7eb !important;\n    }\n    \n    .shadow {\n        box-shadow: none !important;\n    }\n}\n</style>"],"names":["verificationResult","ref","isLoading","form","reactive","watch","_a","verify","response","axios","error","_b","showVerificationForm","computed","verifyAnother","_createVNode","_unref","Head","AuthenticationCard","AuthenticationCardLogo","_createElementVNode","_hoisted_1","_cache","_openBlock","_createElementBlock","_hoisted_2","_toDisplayString","_hoisted_3","InputLabel","TextInput","$event","InputError","_hoisted_4","PrimaryButton","_normalizeClass","_hoisted_7","_Fragment","_createTextVNode","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","window"],"mappings":"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"}
import{Q as Be,I as te,T as he,f,s as z,i as u,o as d,e as a,k as S,w as g,u as s,l as m,n as F,d as i,x as V,b as Ee,H as R,G as Ie,C as G,F as T,m as B,t as k,y as I,B as Ne,A as ze,S as O,N as Ve,z as De}from"./vendor-Bxre9-EX.js";import{_ as Le}from"./ActionMessage-CwIGW79N.js";import{_ as Ue}from"./FormSection-Cy4pNI7l.js";import{_ as b}from"./InputError-B-044Lai.js";import{_ as x}from"./InputLabel-CwSxgxQN.js";import{_ as Me}from"./PrimaryButton-Bn8ATV9O.js";import{_ as Ce}from"./SecondaryButton-CDa1PA8F.js";import{_ as E}from"./TextInput-CQrGoHHq.js";import"./SectionTitle-DH8oDumU.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const je={key:0,class:"col-span-6 sm:col-span-4"},Ae={class:"mt-2"},qe=["src","alt"],Fe={class:"mt-2"},Re={class:"col-span-6 space-y-4"},He={class:"border rounded-lg overflow-hidden dark:border-gray-700"},We={class:"p-6 bg-white dark:bg-gray-900"},Ke={class:"grid grid-cols-6 gap-6"},Ge={class:"col-span-6 sm:col-span-3"},Ye={class:"col-span-6 sm:col-span-3"},Je={class:"col-span-6 sm:col-span-3"},Qe={class:"col-span-6 sm:col-span-3"},Xe=["value","selected"],Ze={class:"col-span-6 sm:col-span-3"},et=["value","selected"],tt={class:"col-span-6 sm:col-span-3"},it=["value","selected"],ot={class:"border rounded-lg overflow-hidden dark:border-gray-700"},lt={class:"p-6 bg-white dark:bg-gray-900"},st={class:"grid grid-cols-6 gap-6"},nt={class:"col-span-6 sm:col-span-3"},at={class:"col-span-6 sm:col-span-3"},rt={class:"col-span-6 sm:col-span-3"},dt={class:"col-span-6 sm:col-span-3"},ut={class:"border rounded-lg overflow-hidden dark:border-gray-700"},ct={class:"p-6 bg-white dark:bg-gray-900"},mt={class:"grid grid-cols-6 gap-6"},pt={class:"col-span-6 sm:col-span-3"},gt={key:0,class:"mt-2"},ft={class:"text-xs text-gray-600 dark:text-gray-400"},_t={class:"text-xs text-green-600 dark:text-green-400 mt-1"},vt={class:"col-span-6 sm:col-span-3"},yt={class:"col-span-6"},bt={class:"col-span-6"},xt={class:"col-span-6 sm:col-span-2"},wt={class:"col-span-6 sm:col-span-2"},kt={class:"col-span-6 sm:col-span-2"},ht={class:"border rounded-lg overflow-hidden dark:border-gray-700"},zt={class:"p-6 bg-white dark:bg-gray-900"},Vt={class:"grid grid-cols-6 gap-6"},Ct={class:"col-span-6 sm:col-span-3"},St=["value"],Pt={class:"col-span-6 sm:col-span-3"},Ot={class:"relative"},$t=["disabled"],Tt=["value"],Bt=["value","disabled"],Et={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},It={class:"col-span-6 sm:col-span-3"},Nt={class:"relative"},Dt=["disabled"],Lt=["value"],Ut=["value","disabled"],Mt={class:"col-span-6 sm:col-span-3"},jt={class:"relative"},At=["disabled"],qt=["value"],Ft=["value","disabled"],Rt={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},Ht={class:"col-span-6 sm:col-span-3"},Wt={class:"relative"},Kt=["disabled"],Gt=["value"],Yt=["value","disabled"],Jt={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},Qt={class:"col-span-6 sm:col-span-3"},Xt={class:"relative"},Zt=["disabled"],ei=["value"],ti=["value","disabled"],ii={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},oi={class:"col-span-6 sm:col-span-3"},li={class:"relative"},si=["disabled"],ni=["value"],ai=["value","disabled"],ri={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},di={class:"col-span-6 sm:col-span-3"},ui={class:"relative"},ci=["disabled"],mi=["value"],pi=["value","disabled"],gi={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},fi={class:"col-span-6 sm:col-span-3"},_i={class:"relative"},vi=["disabled"],yi=["value"],bi=["value","disabled"],xi={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},wi={key:0,class:"fixed z-50 inset-0 overflow-y-auto","aria-labelledby":"otp-modal-title",role:"dialog","aria-modal":"true"},ki={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},hi={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-6 pt-5 pb-6 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-md sm:w-full sm:p-8 relative"},zi=["disabled"],Vi={class:"sm:flex sm:items-start"},Ci={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Si={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100",id:"otp-modal-title"},Pi={class:"mt-4"},Oi={class:"text-sm text-gray-600 dark:text-gray-300"},$i={class:"block font-medium text-gray-900 dark:text-white mt-1"},Ti={class:"mt-6"},Bi={class:"flex justify-between space-x-3"},Ei=["onUpdate:modelValue","onInput","onKeydown","disabled"],Ii={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},Ni={class:"mt-4 text-center"},Di={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},Li={class:"font-medium"},Ui=["disabled"],Mi={class:"mt-6 sm:mt-8 sm:flex sm:flex-row-reverse"},ji=["disabled"],Ai={key:0},qi={key:1,class:"flex items-center"},Fi=["disabled"],to={__name:"UpdateProfileInformationForm",props:{},setup(Ri){const{props:Y}=Be(),P=te(()=>{var o;return((o=Y==null?void 0:Y.auth)==null?void 0:o.user)||null}),N=te(()=>{var o;return((o=P.value)==null?void 0:o.profile)||{}}),c=te(()=>{var o;return((o=P.value)==null?void 0:o.citizen)||{}}),t=he({_method:"PUT",profile:{surname:"",other_name:"",email:"",photo:null,date_of_birth:"",gender:"",ncpwd_number:"",ethnicity_id:"",religion_id:"",telephone:"",address_line_1:"",address_line_2:"",city:"",state:"",country:""},citizen:{national_identification_number:"",passport_number:"",driver_license_number:"",county_id:"",sub_county_id:"",constituency_id:"",ward_id:"",location_id:"",village_id:"",polling_center_id:"",polling_station_id:"",polling_stream_id:""}},{resetOnSuccess:!1,rules:{"citizen.national_identification_number":[(o,e)=>!o&&!e.citizen.passport_number?"Either National Identification Number or Passport Number is required":!0],"citizen.passport_number":[(o,e)=>!o&&!e.citizen.national_identification_number?"Either Passport Number or National Identification Number is required":!0]}}),D={ttl:300,rate_limit:60,attempts_limit:5},L=f(0),j=f(null);let J=null;const A=f(!1),H=f(!1),C=he({otp:"",field_to_verify:"",verification_value:""}),ue=o=>{const r=Math.max(0,Math.floor((o-new Date)/1e3)),n=Math.floor(r/60),w=r%60;return{formatted:`${n}:${w.toString().padStart(2,"0")}`,isExpired:r<=0}},Se=o=>{let e=o.target.value.replace(/\D/g,"");e=e.substring(0,10),e.length>6?e=e.replace(/^(\d{3})(\d{3})(\d+)$/,"$1 $2 $3"):e.length>3&&(e=e.replace(/^(\d{3})(\d+)$/,"$1 $2")),t.telephone=e},Q=()=>{J&&(clearInterval(J),J=null)},ce=()=>{let o=!1,e=0,r=null;if(!j.value){const n=new Date;n.setSeconds(n.getSeconds()+D.ttl),j.value=n}Q(),O.fire({title:"Verification Required",html:`
            <p class="mb-4">We've sent a 6-digit verification code to your ${C.field_to_verify==="email"?"email":"phone number"}: <strong>${C.new_value}</strong></p>
            <p class="mb-4 text-sm text-gray-600">
                This code will expire in 
                <span id="otp-timer" class="font-medium">${ue(j.value).formatted}</span>
            </p>
            <div class="flex flex-col items-center">
                <input id="swal-otp-input" class="swal2-input w-full text-center" placeholder="Enter 6-digit code" maxlength="6" type="text">
                <div class="text-sm text-gray-500 mt-2">
                    Didn't receive the code?
                    <button type="button" id="resend-otp-btn" class="text-green-600 hover:text-green-800">Resend</button>
                    <span id="resend-countdown" class="hidden ml-1 text-gray-500"></span>
                </div>
                <div class="text-xs text-gray-500 mt-1">
                    Attempts remaining: <span class="font-medium">${D.attempts_limit-L.value}</span> of ${D.attempts_limit}
                </div>
                ${L.value>0?`
                <div class="text-xs text-red-500 mt-1">
                    ${D.attempts_limit-L.value===0?"No attempts left. ":""}${L.value} failed attempt${L.value>1?"s":""}.
                </div>
                `:""}
            </div>
        `,showCancelButton:!0,confirmButtonText:"Verify",confirmButtonColor:"#10b981",cancelButtonText:"Cancel",allowOutsideClick:!1,preConfirm:()=>{const w=document.getElementById("swal-otp-input").value;return!w||w.length!==6?(O.showValidationMessage("Please enter the 6-digit verification code"),!1):w},didOpen:()=>{const n=document.getElementById("resend-otp-btn"),w=document.getElementById("resend-countdown"),h=document.getElementById("otp-timer");if(h){const v=()=>{const{formatted:_,isExpired:$}=ue(j.value);h.textContent=_,_.startsWith("0:")||$?(h.classList.add("text-red-500"),h.classList.remove("text-gray-600")):(h.classList.remove("text-red-500"),h.classList.add("text-gray-600")),$&&(h.textContent="expired",h.classList.add("font-bold"))};v(),J=setInterval(v,1e3)}const y=()=>{o?(n.disabled=!0,n.classList.remove("text-green-600","hover:text-green-800"),n.classList.add("text-gray-400","cursor-not-allowed"),w.classList.remove("hidden"),w.textContent=`(${e}s)`):(n.disabled=!1,n.classList.add("text-green-600","hover:text-green-800"),n.classList.remove("text-gray-400","cursor-not-allowed"),w.classList.add("hidden"))};n.addEventListener("click",async()=>{var v,_,$;if(!o)try{await me(C.field_to_verify,C.new_value)}catch(l){if(($=(_=(v=l.response)==null?void 0:v.data)==null?void 0:_.message)!=null&&$.includes("wait")){const p=l.response.data.message.match(/wait (\d+) (?:seconds|second)/i);e=p&&p[1]?parseInt(p[1]):D.rate_limit,o=!0,y(),r=setInterval(()=>{e-=1,y(),e<=0&&(clearInterval(r),o=!1,y())},1e3)}}})},willClose:()=>{r&&clearInterval(r),Q()}}).then(async n=>{n.isConfirmed&&await pe(n.value)})},me=async(o,e)=>{var r,n,w,h;try{if(!o||!e){X("error","Validation Error",`${o==="email"?"Email":"Phone number"} is required for verification`);return}O.fire({title:"Sending OTP",text:`Please wait while we send an OTP to your ${o==="email"?"email":"phone number"}...`,allowOutsideClick:!1,didOpen:()=>{O.showLoading()}}),L.value=0,Q();const y=new Date;y.setSeconds(y.getSeconds()+D.ttl),j.value=y;const v={};o==="email"?v.email=e:o==="telephone"&&(v.telephone=e);const _=await axios.post(route("auth.request-otp"),v);if(_.data.status==="success")C.verification_id=_.data.verification_id,C.field_to_verify=o,C.new_value=e,ce();else throw new Error(_.data.message||"Failed to send OTP. Please try again.")}catch(y){if(console.error("OTP send error:",y),(n=(r=y.response)==null?void 0:r.data)!=null&&n.message&&y.response.data.message.includes("wait")){let v=D.rate_limit;const _=y.response.data.message.match(/wait (\d+) (?:seconds|second)/i);_&&_[1]&&(v=parseInt(_[1]));const $=setInterval(()=>{v-=1;const l=document.getElementById("otp-timer");l&&(l.textContent=`${v}`),v<=0&&(clearInterval($),O.close())},1e3);O.fire({icon:"warning",title:"Rate Limited",html:`
                    <p>You must wait before requesting another OTP.</p>
                    <div class="mt-4 text-center">
                        <p>Try again in <span id="otp-timer" class="font-bold text-lg">${v}</span> seconds</p>
                    </div>
                `,showConfirmButton:!0,confirmButtonText:"OK",confirmButtonColor:"#10b981",willClose:()=>{clearInterval($)}})}else O.fire({icon:"error",title:"OTP Error",text:((h=(w=y.response)==null?void 0:w.data)==null?void 0:h.message)||"Failed to send OTP. Please try again."})}},pe=async o=>{var e,r,n,w,h,y;if(j.value&&new Date>j.value){O.fire({icon:"error",title:"OTP Expired",text:"The verification code has expired. Please request a new one.",confirmButtonColor:"#10b981"});return}if(L.value>=D.attempts_limit){O.fire({icon:"error",title:"Maximum Attempts Reached",text:"You've exceeded the maximum number of verification attempts. Please request a new OTP.",confirmButtonColor:"#10b981"});return}L.value+=1;try{O.fire({title:"Verifying OTP",text:"Please wait while we verify your OTP...",allowOutsideClick:!1,didOpen:()=>{O.showLoading()}});const v={otp:o};C.field_to_verify==="email"?v.email=C.new_value:C.field_to_verify==="telephone"&&(v.telephone=C.new_value);const _=await axios.post(route("auth.verify-otp"),v);if(_.data.status==="success")L.value=0,C.field_to_verify==="email"?(t.email=C.new_value,t.email_verified_at=new Date().toISOString(),t.clearErrors("email")):C.field_to_verify==="telephone"&&(t.telephone=C.new_value,t.telephone_verified_at=new Date().toISOString(),t.clearErrors("telephone")),H.value=!1,C.reset(),Q(),O.fire({icon:"success",title:"Verification Successful",text:`Your ${C.field_to_verify==="email"?"email address":"telephone number"} has been verified successfully.`,confirmButtonColor:"#10b981"}),(e=_.data.data)!=null&&e.accessToken&&(window.localStorage.setItem("auth_token",_.data.data.accessToken),axios.defaults.headers.common.Authorization=`Bearer ${_.data.data.accessToken}`,await Ve.reload({only:["user"]})),q.value&&(q.value=!1,await fe());else throw new Error(_.data.message||"Invalid OTP. Please try again.")}catch(v){console.error("OTP verification error:",v),O.fire({icon:"error",title:"Verification Failed",html:`
                <p>${((n=(r=v.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to verify OTP. Please try again."}</p>
                ${(y=(h=(w=v.response)==null?void 0:w.data)==null?void 0:h.message)!=null&&y.includes("attempts exceeded")?`<p class="mt-2 text-sm">You have exceeded the maximum of ${D.attempts_limit} attempts. Please request a new OTP.</p>`:""}
            `,confirmButtonColor:"#10b981"}).then(()=>{L.value<D.attempts_limit&&ce()})}},q=f(!1),X=(o,e,r)=>{O.fire({toast:!0,position:"top-end",icon:o,title:e,text:r,showConfirmButton:!1,timer:3e3,timerProgressBar:!0})};z(N,o=>{o&&Object.keys(o).forEach(e=>{e in t.profile&&(t.profile[e]=o[e])})},{immediate:!0,deep:!0}),z(c,o=>{o&&Object.keys(o).length>0&&Object.keys(o).forEach(e=>{e in t.citizen&&(t.citizen[e]=o[e])})},{immediate:!0,deep:!0}),z(N,o=>{if(o){t.profile.surname=o.last_name||null,t.profile.other_name=(o.first_name||"")+(o.middle_name?` ${o.middle_name}`:""),t.profile.email=o.email||P.value.email;const e=o.date_of_birth||null;if(e){const r=new Date(e);t.profile.date_of_birth=isNaN(r.getTime())?"":r.toISOString().split("T")[0]}else t.profile.date_of_birth="";t.profile.gender=o.gender||null,t.profile.ncpwd_number=o.ncpwd_number||null,t.profile.ethnicity_id=o.ethnicity_id||null,t.profile.religion_id=o.religion_id||null,t.profile.telephone=o.telephone||null,t.profile.address_line_1=o.address_line_1||null,t.profile.address_line_2=o.address_line_2||null,t.profile.city=o.city||null,t.profile.state=o.state||null,t.profile.country=o.country||null}},{immediate:!0,deep:!0}),z(c,o=>{o&&Object.keys(o).length>0&&(console.log("Updating citizen form data:",o),t.citizen.national_identification_number=o.national_identification_number||null,t.citizen.passport_number=o.passport_number||null,t.citizen.driver_license_number=o.driver_license_number||null,t.citizen.county_id=o.county_id||null,t.citizen.sub_county_id=o.sub_county_id||null,t.citizen.constituency_id=o.constituency_id||null,t.citizen.ward_id=o.ward_id||null,t.citizen.location_id=o.location_id||null,t.citizen.village_id=o.village_id||null,t.citizen.polling_center_id=o.polling_center_id||null,t.citizen.polling_station_id=o.polling_station_id||null,t.citizen.polling_stream_id=o.polling_stream_id||null,console.log("Updated form.citizen:",t.citizen))},{immediate:!0,deep:!0});const ge=f(null),W=f(null),K=f(null),fe=async(o=!1)=>{const e=(P==null?void 0:P.email)&&t.profile.email!==P.email,r=(N==null?void 0:N.telephone)&&t.profile.telephone!==N.telephone;if(!o&&(q.value||e||r)){q.value=!0;let n="",w="",h="";if(r?(n="telephone",N!=null&&N.telephone?(w=N.telephone,h=`We'll send a verification code to your current number <strong>${N.telephone}</strong> to confirm this change.`):q.value=!1):e&&(P!=null&&P.email)&&(n="email",w=P.email,h=`We'll send a verification code to <strong>${P.email}</strong> to confirm your email address change.`),n)try{const y=await O.fire({title:"Verify "+(n==="email"?"Email Address":"Phone Number"),html:h,icon:"info",showCancelButton:!0,confirmButtonText:"Send Verification Code",cancelButtonText:"Cancel",reverseButtons:!0,customClass:{confirmButton:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",cancelButton:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300"},buttonsStyling:!1});y.isConfirmed?await me(n,w):y.isDismissed&&(q.value=!1);return}catch(y){console.error("Error in verification flow:",y),X("error","Verification Error","An error occurred while setting up verification. Please try again."),q.value=!1;return}}console.log("Form data being submitted:",JSON.stringify(t.data(),null,2)),t.transform(n=>(console.log("Transformed form data:",JSON.stringify(n,null,2)),{...n,_method:"PUT"})).post(route("user-profile-information.update"),{onStart:()=>{console.log("Form submission started"),t.processing=!0},onFinish:()=>{console.log("Form submission finished"),t.processing=!1},onSuccess:n=>{console.log("Profile update successful",n),Z(),X("success","Success","Profile updated successfully!"),window.location.reload()},onError:n=>{var h,y,v;console.error("Detailed error updating profile:",{errors:n,response:n==null?void 0:n.response,data:(h=n==null?void 0:n.response)==null?void 0:h.data,status:(y=n==null?void 0:n.response)==null?void 0:y.status,statusText:(v=n==null?void 0:n.response)==null?void 0:v.statusText});let w="Failed to update profile. Please check the form for errors.";if(n&&typeof n=="object"){if(n.updateProfileInformation){const _=n.updateProfileInformation,$=Object.keys(_)[0];$&&(w=Array.isArray(_[$])?_[$][0]:String(_[$]))}else if(Object.keys(n).length>0){const _=Object.values(n)[0];w=Array.isArray(_)?_[0]:String(_)}}X("error","Error",w)},preserveScroll:!0,forceFormData:!0,onCancelToken:n=>{console.log("Request cancel token created")},onCancel:()=>{console.log("Request was cancelled")}})},Pe=()=>{ge.value=!0},Oe=()=>{K.value.click()},$e=()=>{const o=K.value.files[0];if(!o)return;if(!o.type.match("image.*")){O.fire({icon:"error",title:"Invalid File Type",text:"Please select an image file (JPEG, PNG, GIF, etc.)",confirmButtonColor:"#10b981"}),Z();return}const e=5*1024*1024;if(o.size>e){O.fire({icon:"error",title:"File Too Large",text:"Maximum file size is 5MB. Please choose a smaller file.",confirmButtonColor:"#10b981"}),Z();return}const r=new FileReader;r.onload=n=>{W.value=n.target.result,t.profile&&(t.profile.photo=o)},r.readAsDataURL(o)},Te=()=>{Ve.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{W.value=null,Z()}})},Z=()=>{var o;(o=K.value)!=null&&o.value&&(K.value.value=null)},U=f("personal");f([]),f([]),f([]),f([]),f([]),f([]),f([]);const _e=f(!1);f(!1);const ve=f(!1),ye=f(!1),be=f(!1),xe=f(!1),we=f(!1),ke=f(!1),M=te(()=>{var e;return((e=Y.formData)==null?void 0:e.locations)||{counties:[],sub_counties:[],constituencies:[],wards:[],locations:[],villages:[],polling_centers:[],polling_stations:[],polling_streams:[]}}),ie=f([]),oe=f([]),le=f([]),se=f([]),ne=f([]),ae=f([]),re=f([]),de=f([]);z(()=>t.citizen.county_id,o=>{var e,r;if(!o){ie.value=[],oe.value=[],t.citizen.sub_county_id="",t.citizen.constituency_id="";return}ie.value=((e=M.value.sub_counties)==null?void 0:e.filter(n=>n.county_id==o))||[],oe.value=((r=M.value.constituencies)==null?void 0:r.filter(n=>n.county_id==o))||[],t.citizen.sub_county_id="",t.citizen.constituency_id=""}),z(()=>t.citizen.constituency_id,o=>{var e;if(!o){le.value=[],t.citizen.ward_id="";return}le.value=((e=M.value.wards)==null?void 0:e.filter(r=>r.constituency_id==o))||[],t.citizen.ward_id=""}),z(()=>t.citizen.ward_id,o=>{var e,r;if(!o){se.value=[],ae.value=[],t.citizen.location_id="",t.citizen.polling_center_id="";return}se.value=((e=M.value.locations)==null?void 0:e.filter(n=>n.ward_id==o))||[],ae.value=((r=M.value.polling_centers)==null?void 0:r.filter(n=>n.ward_id==o))||[],t.citizen.location_id="",t.citizen.polling_center_id=""}),z(()=>t.citizen.location_id,o=>{var e;if(!o){ne.value=[],t.citizen.village_id="";return}ne.value=((e=M.value.villages)==null?void 0:e.filter(r=>r.location_id==o))||[],t.citizen.village_id=""}),z(()=>t.citizen.polling_center_id,o=>{var e;if(!o){re.value=[],t.citizen.polling_station_id="";return}re.value=((e=M.value.polling_stations)==null?void 0:e.filter(r=>r.center_id==o))||[],t.citizen.polling_station_id=""}),z(()=>t.citizen.polling_station_id,o=>{var e;if(!o){de.value=[],t.citizen.polling_stream_id="";return}de.value=((e=M.value.polling_streams)==null?void 0:e.filter(r=>r.station_id==o))||[],t.citizen.polling_stream_id=""}),z(()=>t.citizen.county_id,()=>{t.citizen.sub_county_id="",t.citizen.constituency_id="",t.citizen.ward_id="",t.citizen.location_id="",t.citizen.village_id="",t.citizen.polling_center_id="",t.citizen.polling_station_id="",t.citizen.polling_stream_id=""}),z(()=>t.citizen.constituency_id,()=>{t.citizen.ward_id="",t.citizen.location_id="",t.citizen.village_id="",t.citizen.polling_center_id="",t.citizen.polling_station_id="",t.citizen.polling_stream_id=""}),z(()=>t.citizen.ward_id,()=>{t.citizen.location_id="",t.citizen.village_id="",t.citizen.polling_center_id="",t.citizen.polling_station_id="",t.citizen.polling_stream_id=""}),z(()=>t.citizen.location_id,()=>{t.citizen.village_id=""}),z(()=>t.citizen.polling_center_id,()=>{t.citizen.polling_station_id="",t.citizen.polling_stream_id=""}),z(()=>t.citizen.polling_station_id,()=>{t.citizen.polling_stream_id=""}),z(()=>t.citizen.county_id,o=>{t.citizen.sub_county_id="",t.citizen.constituency_id="",t.citizen.ward_id="",t.citizen.location_id="",t.citizen.village_id="",t.citizen.polling_center_id="",t.citizen.polling_station_id="",t.polling_stream_id=""}),z(()=>t.citizen.sub_county_id,o=>{o&&(t.citizen.ward_id="",t.citizen.location_id="",t.citizen.village_id="",t.citizen.polling_center_id="",t.citizen.polling_station_id="",t.citizen.polling_stream_id="")}),z(()=>t.citizen.constituency_id,o=>{t.citizen.ward_id="",t.citizen.location_id="",t.citizen.village_id="",t.citizen.polling_center_id="",t.citizen.polling_station_id="",t.citizen.polling_stream_id=""}),z(()=>t.citizen.ward_id,o=>{t.citizen.location_id="",t.citizen.village_id="",t.citizen.polling_center_id="",t.citizen.polling_station_id="",t.citizen.polling_stream_id=""}),z(()=>t.citizen.location_id,o=>{o&&(t.citizen.village_id="")}),z(()=>t.citizen.polling_center_id,o=>{t.citizen.polling_station_id="",t.citizen.polling_stream_id=""}),z(()=>t.citizen.polling_station_id,o=>{o&&(t.citizen.polling_stream_id="")});const ee=o=>{U.value=U.value===o?null:o};return(o,e)=>(d(),u(T,null,[a(Ue,{onSubmitted:fe},{title:g(()=>e[36]||(e[36]=[m(" Profile Information ")])),description:g(()=>e[37]||(e[37]=[m(" Update your personal, contact, and identification information. Ensure all details are accurate and up-to-date. ")])),form:g(()=>{var r,n,w,h,y,v,_,$;return[o.$page.props.jetstream.managesProfilePhotos?(d(),u("div",je,[i("input",{id:"photo",ref_key:"photoInput",ref:K,type:"file",class:"hidden",onChange:$e},null,544),a(x,{for:"photo",value:"Profile Image"}),V(i("div",Ae,[i("img",{src:P.value.profile_photo_path,alt:P.value.name,class:"rounded-full size-20 object-cover"},null,8,qe)],512),[[R,!W.value]]),V(i("div",Fe,[i("span",{class:"block rounded-full size-20 bg-cover bg-no-repeat bg-center",style:Ie("background-image: url('"+W.value+"');")},null,4)],512),[[R,W.value]]),a(Ce,{class:"mt-2 me-2",type:"button",onClick:G(Oe,["prevent"])},{default:g(()=>e[38]||(e[38]=[m(" Select A New Photo ")])),_:1,__:[38]}),P.value.profile_photo_path?(d(),Ee(Ce,{key:0,type:"button",class:"mt-2",onClick:G(Te,["prevent"])},{default:g(()=>e[39]||(e[39]=[m(" Remove Photo ")])),_:1,__:[39]})):S("",!0),a(b,{message:s(t).errors.photo,class:"mt-2"},null,8,["message"])])):S("",!0),i("div",Re,[i("div",He,[i("button",{type:"button",onClick:e[0]||(e[0]=l=>ee("personal")),class:"w-full px-6 py-4 text-left font-medium text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 flex justify-between items-center"},[e[41]||(e[41]=i("span",null,"Personal Information",-1)),(d(),u("svg",{class:F(["w-5 h-5 transition-transform duration-200",{"rotate-180":U.value==="personal"}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e[40]||(e[40]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),V(i("div",We,[i("div",Ke,[i("div",Ge,[a(x,{for:"surname"},{default:g(()=>e[42]||(e[42]=[m(" Surname "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[42]}),a(E,{id:"surname",modelValue:s(t).profile.surname,"onUpdate:modelValue":e[1]||(e[1]=l=>s(t).profile.surname=l),type:"text",class:"mt-1 block w-full",placeholder:"Enter your surname",required:"",autocomplete:"family-name"},null,8,["modelValue"]),a(b,{message:s(t).errors.surname,class:"mt-2"},null,8,["message"])]),i("div",Ye,[a(x,{for:"other_name"},{default:g(()=>e[43]||(e[43]=[m(" Other Name "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[43]}),a(E,{id:"other_name",modelValue:s(t).profile.other_name,"onUpdate:modelValue":e[2]||(e[2]=l=>s(t).profile.other_name=l),type:"text",class:"mt-1 block w-full",placeholder:"Enter your other names",required:"",autocomplete:"given-name"},null,8,["modelValue"]),a(b,{message:s(t).errors["profile.other_name"],class:"mt-2"},null,8,["message"])]),i("div",Je,[a(x,{for:"date_of_birth"},{default:g(()=>e[44]||(e[44]=[m(" Date of Birth "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[44]}),a(E,{id:"date_of_birth",modelValue:s(t).profile.date_of_birth,"onUpdate:modelValue":e[3]||(e[3]=l=>s(t).profile.date_of_birth=l),type:"date",class:"mt-1 block w-full",max:new Date().toISOString().split("T")[0],required:""},null,8,["modelValue","max"]),a(b,{message:s(t).errors["profile.date_of_birth"],class:"mt-2"},null,8,["message"])]),i("div",Qe,[a(x,{for:"gender"},{default:g(()=>e[45]||(e[45]=[m(" Gender "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[45]}),V(i("select",{id:"gender","onUpdate:modelValue":e[4]||(e[4]=l=>s(t).profile.gender=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",required:""},[e[46]||(e[46]=i("option",{value:""},"Select Gender",-1)),(d(!0),u(T,null,B(o.$page.props.formData.genders,l=>{var p;return d(),u("option",{key:l.id,value:l.id,selected:((p=P.value.profile)==null?void 0:p.gender)===l.id},k(l.name),9,Xe)}),128))],512),[[I,s(t).profile.gender]]),a(b,{message:s(t).errors.gender,class:"mt-2"},null,8,["message"])]),i("div",Ze,[a(x,{for:"ethnicity_id"},{default:g(()=>e[47]||(e[47]=[m(" Ethnicity "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[47]}),V(i("select",{id:"ethnicity_id","onUpdate:modelValue":e[5]||(e[5]=l=>s(t).profile.ethnicity_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",required:""},[e[48]||(e[48]=i("option",{value:""},"Select Ethnicity",-1)),(d(!0),u(T,null,B(o.$page.props.formData.ethnicities,l=>{var p;return d(),u("option",{key:l.id,value:l.id,selected:((p=P.value.profile)==null?void 0:p.ethnicity_id)===l.id},k(l.name),9,et)}),128))],512),[[I,s(t).profile.ethnicity_id]]),a(b,{message:s(t).errors.ethnicity_id,class:"mt-2"},null,8,["message"])]),i("div",tt,[a(x,{for:"religion_id"},{default:g(()=>e[49]||(e[49]=[m(" Religion "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[49]}),V(i("select",{id:"religion_id","onUpdate:modelValue":e[6]||(e[6]=l=>s(t).profile.religion_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",required:""},[e[50]||(e[50]=i("option",{value:""},"Select Religion",-1)),(d(!0),u(T,null,B(o.$page.props.formData.religions,l=>{var p;return d(),u("option",{key:l.id,value:l.id,selected:((p=P.value.profile)==null?void 0:p.religion_id)===l.id},k(l.name),9,it)}),128))],512),[[I,s(t).profile.religion_id]]),a(b,{message:s(t).errors.religion_id,class:"mt-2"},null,8,["message"])])])],512),[[R,U.value==="personal"]])]),i("div",ot,[i("button",{type:"button",onClick:e[7]||(e[7]=l=>ee("identification")),class:"w-full px-6 py-4 text-left font-medium text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 flex justify-between items-center"},[e[52]||(e[52]=i("span",null,"Identification Information",-1)),(d(),u("svg",{class:F(["w-5 h-5 transition-transform duration-200",{"rotate-180":U.value==="identification"}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e[51]||(e[51]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),V(i("div",lt,[i("div",st,[i("div",nt,[a(x,{for:"national_identification_number"},{default:g(()=>e[53]||(e[53]=[m(" National Identification Number "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1),i("span",{class:"text-xs text-gray-500 font-normal"},"(or Passport Number)",-1)])),_:1,__:[53]}),a(E,{id:"national_identification_number",modelValue:s(t).citizen.national_identification_number,"onUpdate:modelValue":e[8]||(e[8]=l=>s(t).citizen.national_identification_number=l),type:"text",class:"mt-1 block w-full",placeholder:"e.g., 12345678",required:!s(t).citizen.passport_number,autocomplete:"off"},null,8,["modelValue","required"]),a(b,{message:s(t).errors["citizen.national_identification_number"],class:"mt-2"},null,8,["message"])]),i("div",at,[a(x,{for:"passport_number"},{default:g(()=>e[54]||(e[54]=[m(" Passport Number "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1),i("span",{class:"text-xs text-gray-500 font-normal"},"(or National Identification Number)",-1)])),_:1,__:[54]}),a(E,{id:"passport_number",modelValue:s(t).citizen.passport_number,"onUpdate:modelValue":e[9]||(e[9]=l=>s(t).citizen.passport_number=l),type:"text",class:"mt-1 block w-full",placeholder:"e.g., A1234567",required:!s(t).citizen.national_identification_number,autocomplete:"off"},null,8,["modelValue","required"]),a(b,{message:s(t).errors["citizen.passport_number"],class:"mt-2"},null,8,["message"])]),i("div",rt,[a(x,{for:"membership_number"},{default:g(()=>e[55]||(e[55]=[m(" Membership Number "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[55]}),a(E,{id:"membership_number",modelValue:s(t).citizen.uuid,"onUpdate:modelValue":e[10]||(e[10]=l=>s(t).citizen.uuid=l),type:"text",class:"mt-1 block w-full bg-gray-200 text-gray-500 rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm opacity-50",placeholder:"e.g., FKP-2345678",required:!0,readonly:"",autocomplete:"off"},null,8,["modelValue"]),a(b,{message:s(t).errors["citizen.uuid"],class:"mt-2"},null,8,["message"])]),i("div",dt,[a(x,{for:"ncpwd_number"},{default:g(()=>e[56]||(e[56]=[m(" NCPWD Number "),i("span",{class:"text-xs text-gray-500 font-normal"},"(if Applicable)",-1)])),_:1,__:[56]}),a(E,{id:"ncpwd_number",modelValue:s(t).profile.ncpwd_number,"onUpdate:modelValue":e[11]||(e[11]=l=>s(t).profile.ncpwd_number=l),type:"text",class:"mt-1 block w-full",placeholder:"e.g., NCPWD/1234/5678"},null,8,["modelValue"]),a(b,{message:s(t).errors.ncpwd_number,class:"mt-2"},null,8,["message"])])])],512),[[R,U.value==="identification"]])]),i("div",ut,[i("button",{type:"button",onClick:e[12]||(e[12]=l=>ee("contact")),class:"w-full px-6 py-4 text-left font-medium text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 flex justify-between items-center"},[e[58]||(e[58]=i("span",null,"Contact Information",-1)),(d(),u("svg",{class:F(["w-5 h-5 transition-transform duration-200",{"rotate-180":U.value==="contact"}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e[57]||(e[57]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),V(i("div",ct,[i("div",mt,[i("div",pt,[a(x,{for:"email"},{default:g(()=>e[59]||(e[59]=[m(" Email Address "),i("span",{class:"text-xs text-gray-500 font-normal"},"(Optional)",-1)])),_:1,__:[59]}),a(E,{id:"email",modelValue:s(t).profile.email,"onUpdate:modelValue":e[13]||(e[13]=l=>s(t).profile.email=l),type:"email",class:"mt-1 block w-full",placeholder:"your.email@example.com",autocomplete:"email"},null,8,["modelValue"]),a(b,{message:s(t).errors["profile.email"],class:"mt-2"},null,8,["message"]),o.$page.props.jetstream.hasEmailVerification&&P.value.email_verified_at===null?(d(),u("div",gt,[i("p",ft,[e[61]||(e[61]=m(" Your email is unverified. ")),a(s(Ne),{href:o.route("verification.send"),method:"post",as:"button",class:"underline text-xs hover:text-gray-900 dark:hover:text-gray-200",onClick:G(Pe,["prevent"])},{default:g(()=>e[60]||(e[60]=[m(" Resend verification ")])),_:1,__:[60]},8,["href","onClick"])]),V(i("div",_t," Verification link sent! ",512),[[R,ge.value]])])):S("",!0)]),i("div",vt,[a(x,{for:"telephone"},{default:g(()=>e[62]||(e[62]=[m(" Telephone Number "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[62]}),V(i("input",{id:"telephone",name:"telephone","onUpdate:modelValue":e[14]||(e[14]=l=>s(t).profile.telephone=l),type:"tel",class:"border-gray-300 focus:border-green-500 focus:ring-green-500 rounded-md shadow-sm mt-1 block w-full",placeholder:"e.g., 0712345678",required:"",onInput:Se},null,544),[[ze,s(t).profile.telephone]]),a(b,{message:s(t).errors["profile.telephone"],class:"mt-2"},null,8,["message"])]),i("div",yt,[a(x,{for:"address_line_1"},{default:g(()=>e[63]||(e[63]=[m(" Address Line 1 "),i("span",{class:"text-xs text-gray-500 font-normal"},"(Optional)",-1)])),_:1,__:[63]}),a(E,{id:"address_line_1",modelValue:s(t).profile.address_line_1,"onUpdate:modelValue":e[15]||(e[15]=l=>s(t).profile.address_line_1=l),type:"text",class:"mt-1 block w-full",placeholder:"e.g., 123 Main Street"},null,8,["modelValue"]),a(b,{message:s(t).errors["profile.address_line_1"],class:"mt-2"},null,8,["message"])]),i("div",bt,[a(x,{for:"address_line_2"},{default:g(()=>e[64]||(e[64]=[m(" Address Line 2 "),i("span",{class:"text-xs text-gray-500 font-normal"},"(Optional)",-1)])),_:1,__:[64]}),a(E,{id:"address_line_2",modelValue:s(t).profile.address_line_2,"onUpdate:modelValue":e[16]||(e[16]=l=>s(t).profile.address_line_2=l),type:"text",class:"mt-1 block w-full",placeholder:"e.g., Apartment, suite, etc. (optional)"},null,8,["modelValue"]),a(b,{message:s(t).errors["profile.address_line_2"],class:"mt-2"},null,8,["message"])]),i("div",xt,[a(x,{for:"city"},{default:g(()=>e[65]||(e[65]=[m(" City "),i("span",{class:"text-xs text-gray-500 font-normal"},"(Optional)",-1)])),_:1,__:[65]}),a(E,{id:"city",modelValue:s(t).profile.city,"onUpdate:modelValue":e[17]||(e[17]=l=>s(t).profile.city=l),type:"text",class:"mt-1 block w-full",placeholder:"e.g., Nairobi"},null,8,["modelValue"]),a(b,{message:s(t).errors["profile.city"],class:"mt-2"},null,8,["message"])]),i("div",wt,[a(x,{for:"state"},{default:g(()=>e[66]||(e[66]=[m(" State/Province "),i("span",{class:"text-xs text-gray-500 font-normal"},"(Optional)",-1)])),_:1,__:[66]}),a(E,{id:"state",modelValue:s(t).profile.state,"onUpdate:modelValue":e[18]||(e[18]=l=>s(t).profile.state=l),type:"text",class:"mt-1 block w-full",placeholder:"e.g., Nairobi"},null,8,["modelValue"]),a(b,{message:s(t).errors["profile.state"],class:"mt-2"},null,8,["message"])]),i("div",kt,[a(x,{for:"country"},{default:g(()=>e[67]||(e[67]=[m(" Country "),i("span",{class:"text-xs text-gray-500 font-normal"},"(Optional)",-1)])),_:1,__:[67]}),a(E,{id:"country",modelValue:s(t).profile.country,"onUpdate:modelValue":e[19]||(e[19]=l=>s(t).profile.country=l),type:"text",class:"mt-1 block w-full bg-gray-100 dark:bg-gray-800 cursor-not-allowed",placeholder:"e.g., Kenya"},null,8,["modelValue"]),a(b,{message:s(t).errors["profile.country"],class:"mt-2"},null,8,["message"])])])],512),[[R,U.value==="contact"]])]),i("div",ht,[i("button",{type:"button",onClick:e[20]||(e[20]=l=>ee("location")),class:"w-full px-6 py-4 text-left font-medium text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 flex justify-between items-center"},[e[69]||(e[69]=i("span",null,"Voting Location Information",-1)),(d(),u("svg",{class:F(["w-5 h-5 transition-transform duration-200",{"rotate-180":U.value==="location"}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e[68]||(e[68]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),V(i("div",zt,[i("div",Vt,[i("div",Ct,[a(x,{for:"county_id"},{default:g(()=>e[70]||(e[70]=[m(" County "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[70]}),V(i("select",{id:"county_id","onUpdate:modelValue":e[21]||(e[21]=l=>s(t).citizen.county_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",required:""},[e[71]||(e[71]=i("option",{value:""},"Select County",-1)),(d(!0),u(T,null,B(o.$page.props.formData.locations.counties,l=>(d(),u("option",{key:l.id,value:l.id},k(l.name),9,St))),128))],512),[[I,s(t).citizen.county_id]]),a(b,{message:s(t).errors["citizen.county_id"],class:"mt-2"},null,8,["message"])]),i("div",Pt,[a(x,{for:"sub_county_id"},{default:g(()=>e[72]||(e[72]=[m(" Sub County "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[72]}),i("div",Ot,[V(i("select",{id:"sub_county_id","onUpdate:modelValue":e[22]||(e[22]=l=>s(t).citizen.sub_county_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",disabled:!s(t).citizen.county_id||_e.value},[e[73]||(e[73]=i("option",{value:""},"Select Sub County",-1)),(r=c.value)!=null&&r.sub_county&&c.value.sub_county.county_id==s(t).citizen.county_id?(d(),u("option",{value:c.value.sub_county_id,key:"current-subcounty-"+c.value.sub_county_id},k(c.value.sub_county.name),9,Tt)):S("",!0),(d(!0),u(T,null,B(ie.value,l=>{var p;return d(),u("option",{key:l.id,value:l.id,disabled:((p=c.value)==null?void 0:p.sub_county_id)===l.id},k(l.name),9,Bt)}),128))],8,$t),[[I,s(t).citizen.sub_county_id]]),_e.value?(d(),u("div",Et,e[74]||(e[74]=[i("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):S("",!0)]),a(b,{message:s(t).errors["citizen.sub_county_id"],class:"mt-2"},null,8,["message"])]),i("div",It,[a(x,{for:"constituency_id"},{default:g(()=>e[75]||(e[75]=[m(" Constituency "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[75]}),i("div",Nt,[V(i("select",{id:"constituency_id","onUpdate:modelValue":e[23]||(e[23]=l=>s(t).citizen.constituency_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",disabled:!s(t).citizen.county_id,required:""},[e[76]||(e[76]=i("option",{value:""},"Select Constituency",-1)),(n=c.value)!=null&&n.constituency&&c.value.constituency.county_id==s(t).citizen.county_id?(d(),u("option",{value:c.value.constituency_id,key:"current-constituency-"+c.value.constituency_id},k(c.value.constituency.name),9,Lt)):S("",!0),(d(!0),u(T,null,B(oe.value,l=>{var p;return d(),u("option",{key:l.id,value:l.id,disabled:((p=c.value)==null?void 0:p.constituency_id)===l.id},k(l.name),9,Ut)}),128))],8,Dt),[[I,s(t).citizen.constituency_id]])]),a(b,{message:s(t).errors["citizen.constituency_id"],class:"mt-2"},null,8,["message"])]),i("div",Mt,[a(x,{for:"ward_id"},{default:g(()=>e[77]||(e[77]=[m(" Ward "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[77]}),i("div",jt,[V(i("select",{id:"ward_id","onUpdate:modelValue":e[24]||(e[24]=l=>s(t).citizen.ward_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",disabled:!s(t).citizen.constituency_id||ve.value,required:""},[e[78]||(e[78]=i("option",{value:""},"Select Ward",-1)),(w=c.value)!=null&&w.ward&&c.value.ward.constituency_id==s(t).citizen.constituency_id?(d(),u("option",{value:c.value.ward_id,key:"current-ward-"+c.value.ward_id},k(c.value.ward.name),9,qt)):S("",!0),(d(!0),u(T,null,B(le.value,l=>{var p;return d(),u("option",{key:l.id,value:l.id,disabled:((p=c.value)==null?void 0:p.ward_id)===l.id},k(l.name),9,Ft)}),128))],8,At),[[I,s(t).citizen.ward_id]]),ve.value?(d(),u("div",Rt,e[79]||(e[79]=[i("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):S("",!0)]),a(b,{message:s(t).errors["citizen.ward_id"],class:"mt-2"},null,8,["message"])]),i("div",Ht,[a(x,{for:"location_id"},{default:g(()=>e[80]||(e[80]=[m(" Location ")])),_:1,__:[80]}),i("div",Wt,[V(i("select",{id:"location_id","onUpdate:modelValue":e[25]||(e[25]=l=>s(t).citizen.location_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",disabled:!s(t).citizen.ward_id||ye.value},[e[81]||(e[81]=i("option",{value:""},"Select Location",-1)),(h=c.value)!=null&&h.location&&c.value.location.ward_id==s(t).citizen.ward_id?(d(),u("option",{value:c.value.location_id,key:"current-location-"+c.value.location_id},k(c.value.location.name),9,Gt)):S("",!0),(d(!0),u(T,null,B(se.value,l=>{var p;return d(),u("option",{key:l.id,value:l.id,disabled:((p=c.value)==null?void 0:p.location_id)===l.id},k(l.name),9,Yt)}),128))],8,Kt),[[I,s(t).citizen.location_id]]),ye.value?(d(),u("div",Jt,e[82]||(e[82]=[i("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):S("",!0)]),a(b,{message:s(t).errors["citizen.location_id"],class:"mt-2"},null,8,["message"])]),i("div",Qt,[a(x,{for:"village_id"},{default:g(()=>e[83]||(e[83]=[m(" Village ")])),_:1,__:[83]}),i("div",Xt,[V(i("select",{id:"village_id","onUpdate:modelValue":e[26]||(e[26]=l=>s(t).citizen.village_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",disabled:!s(t).citizen.location_id||be.value},[e[84]||(e[84]=i("option",{value:""},"Select Village",-1)),(y=c.value)!=null&&y.village&&c.value.village.location_id==s(t).citizen.location_id?(d(),u("option",{value:c.value.village_id,key:"current-village-"+c.value.village_id},k(c.value.village.name),9,ei)):S("",!0),(d(!0),u(T,null,B(ne.value,l=>{var p;return d(),u("option",{key:l.id,value:l.id,disabled:((p=c.value)==null?void 0:p.village_id)===l.id},k(l.name),9,ti)}),128))],8,Zt),[[I,s(t).citizen.village_id]]),be.value?(d(),u("div",ii,e[85]||(e[85]=[i("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):S("",!0)]),a(b,{message:s(t).errors["citizen.village_id"],class:"mt-2"},null,8,["message"])]),i("div",oi,[a(x,{for:"polling_center_id"},{default:g(()=>e[86]||(e[86]=[m(" Polling Center ")])),_:1,__:[86]}),i("div",li,[V(i("select",{id:"polling_center_id","onUpdate:modelValue":e[27]||(e[27]=l=>s(t).citizen.polling_center_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",disabled:!s(t).citizen.ward_id||xe.value},[e[87]||(e[87]=i("option",{value:""}," Select Polling Center ",-1)),(v=c.value)!=null&&v.polling_center&&c.value.polling_center.ward_id==s(t).citizen.ward_id?(d(),u("option",{value:c.value.polling_center_id,key:"current-center-"+c.value.polling_center_id},k(c.value.polling_center.name),9,ni)):S("",!0),(d(!0),u(T,null,B(ae.value,l=>{var p;return d(),u("option",{key:l.id,value:l.id,disabled:((p=c.value)==null?void 0:p.polling_center_id)===l.id},k(l.name),9,ai)}),128))],8,si),[[I,s(t).citizen.polling_center_id]]),xe.value?(d(),u("div",ri,e[88]||(e[88]=[i("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):S("",!0)]),a(b,{message:s(t).errors["citizen.polling_center_id"],class:"mt-2"},null,8,["message"])]),i("div",di,[a(x,{for:"polling_station_id"},{default:g(()=>e[89]||(e[89]=[m(" Polling Station ")])),_:1,__:[89]}),i("div",ui,[V(i("select",{id:"polling_station_id","onUpdate:modelValue":e[28]||(e[28]=l=>s(t).citizen.polling_station_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",disabled:!s(t).citizen.polling_center_id||we.value},[e[90]||(e[90]=i("option",{value:""}," Select Polling Station ",-1)),(_=c.value)!=null&&_.polling_station&&c.value.polling_station.polling_center_id==s(t).citizen.polling_center_id?(d(),u("option",{value:c.value.polling_station_id,key:"current-station-"+c.value.polling_station_id},k(c.value.polling_station.name),9,mi)):S("",!0),(d(!0),u(T,null,B(re.value,l=>{var p;return d(),u("option",{key:l.id,value:l.id,disabled:((p=c.value)==null?void 0:p.polling_station_id)===l.id},k(l.name),9,pi)}),128))],8,ci),[[I,s(t).citizen.polling_station_id]]),we.value?(d(),u("div",gi,e[91]||(e[91]=[i("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):S("",!0)]),a(b,{message:s(t).errors["citizen.polling_station_id"],class:"mt-2"},null,8,["message"])]),i("div",fi,[a(x,{for:"polling_stream_id"},{default:g(()=>e[92]||(e[92]=[m(" Polling Stream ")])),_:1,__:[92]}),i("div",_i,[V(i("select",{id:"polling_stream_id","onUpdate:modelValue":e[29]||(e[29]=l=>s(t).citizen.polling_stream_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",disabled:!s(t).citizen.polling_station_id||ke.value},[e[93]||(e[93]=i("option",{value:""}," Select Polling Stream ",-1)),($=c.value)!=null&&$.polling_stream&&c.value.polling_stream.polling_station_id==s(t).citizen.polling_station_id?(d(),u("option",{value:c.value.polling_stream_id,key:"current-stream-"+c.value.polling_stream_id},k(c.value.polling_stream.name),9,yi)):S("",!0),(d(!0),u(T,null,B(de.value,l=>{var p;return d(),u("option",{key:l.id,value:l.id,disabled:((p=c.value)==null?void 0:p.polling_stream_id)===l.id},k(l.name),9,bi)}),128))],8,vi),[[I,s(t).citizen.polling_stream_id]]),ke.value?(d(),u("div",xi,e[94]||(e[94]=[i("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):S("",!0)]),a(b,{message:s(t).errors["citizen.polling_stream_id"],class:"mt-2"},null,8,["message"])])])],512),[[R,U.value==="location"]])])])]}),actions:g(()=>[a(Le,{on:s(t).recentlySuccessful,class:"me-3"},{default:g(()=>e[95]||(e[95]=[m(" Saved. ")])),_:1,__:[95]},8,["on"]),a(Me,{class:F({"opacity-25":s(t).processing}),disabled:s(t).processing},{default:g(()=>e[96]||(e[96]=[m(" Save ")])),_:1,__:[96]},8,["class","disabled"])]),_:1}),H.value?(d(),u("div",wi,[i("div",ki,[i("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:e[30]||(e[30]=G(r=>H.value=!1,["self"]))}),i("div",hi,[i("button",{type:"button",onClick:e[31]||(e[31]=r=>H.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-200 focus:outline-none",disabled:A.value},e[97]||(e[97]=[i("span",{class:"sr-only"},"Close",-1),i("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,zi),i("div",Vi,[e[101]||(e[101]=i("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-indigo-100 dark:bg-indigo-900 sm:mx-0 sm:h-10 sm:w-10"},[i("svg",{class:"h-6 w-6 text-indigo-600 dark:text-indigo-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),i("div",Ci,[i("h3",Si," Verify "+k(s(C).field_to_verify==="email"?"Email Address":"Phone Number"),1),i("div",Pi,[i("p",Oi,[e[98]||(e[98]=m(" We've sent a 6-digit verification code to: ")),i("span",$i,k(s(C).field_to_verify==="email"?s(t).email:o.formatPhoneNumberForDisplay(s(C).new_value)),1)]),i("div",Ti,[e[100]||(e[100]=i("label",{for:"otp",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Enter verification code ",-1)),i("div",Bi,[(d(),u(T,null,B(6,r=>V(i("input",{key:r,"onUpdate:modelValue":n=>o.otpDigits[r-1]=n,onInput:n=>o.onOtpInput(n,r-1),onKeydown:De(n=>o.onOtpKeyDown(n,r-1),["delete"]),onPaste:e[32]||(e[32]=G(n=>o.onOtpPaste(n),["prevent"])),type:"tel",maxlength:"1",pattern:"[0-9]",inputmode:"numeric",autocomplete:"one-time-code",disabled:A.value,class:F(["w-full h-14 text-2xl text-center font-semibold text-gray-900 dark:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50",{"border-red-500":o.otpError}])},null,42,Ei),[[ze,o.otpDigits[r-1]]])),64))]),o.otpError?(d(),u("p",Ii,k(o.otpError),1)):S("",!0),i("div",Ni,[o.otpResendEnabled?(d(),u("button",{key:1,type:"button",class:"text-sm font-medium text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300 focus:outline-none disabled:opacity-50",onClick:e[33]||(e[33]=(...r)=>o.resendOtp&&o.resendOtp(...r)),disabled:!o.otpResendEnabled||A.value}," Resend code ",8,Ui)):(d(),u("p",Di,[e[99]||(e[99]=m(" Didn't receive a code? Resend in ")),i("span",Li,k(Math.floor(o.otpCountdown/60))+":"+k((o.otpCountdown%60).toString().padStart(2,"0")),1)]))])])])])]),i("div",Mi,[i("button",{type:"button",class:F(["w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-3 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-150",{"opacity-75 cursor-not-allowed":o.otpDigits.join("").length!==6||A.value}]),onClick:e[34]||(e[34]=r=>pe(o.otpDigits.join(""))),disabled:o.otpDigits.join("").length!==6||A.value},[A.value?(d(),u("span",qi,e[102]||(e[102]=[i("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),m(" Verifying... ")]))):(d(),u("span",Ai,"Verify Now"))],10,ji),i("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-3 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-150",onClick:e[35]||(e[35]=r=>H.value=!1),disabled:A.value}," Cancel ",8,Fi)]),e[103]||(e[103]=i("div",{class:"mt-4 text-center"},[i("p",{class:"text-xs text-gray-500 dark:text-gray-400"},[m(" Having trouble? Contact support at "),i("a",{href:"mailto:support@forwardkenyaparty.com",class:"text-indigo-600 dark:text-indigo-400 hover:underline"},"support@forwardkenyaparty.com"),m(" or call +254 700 000 000 ")])],-1))])])])):S("",!0)],64))}};export{to as default};
//# sourceMappingURL=UpdateProfileInformationForm-Bj_BiKTk.js.map

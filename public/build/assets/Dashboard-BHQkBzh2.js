import{u as de,i as h,L as N,x as Z,v as be,Q as ye,j as u,k as D,o as d,e,t as p,I as ve,A as f,m as x,D as F,l,B as q,f as j,w as O,n as S,M as ke,O as re,F as U,G as we,p as W,s as ie,N as le,d as xe,E as oe,J as he}from"./vendor-DmCWM84H.js";import{_ as _e}from"./AppLayout-9Uk9vfcH.js";import{C as ae}from"./vue-select-DxqfLbiP.js";import{_ as ne}from"./InputError-CfRDvhJ1.js";const $e={key:0,class:"fixed inset-0 overflow-y-auto z-50","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Ce={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},De={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-6 pt-5 pb-6 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full sm:p-8 relative"},Me={class:"w-full"},Pe={class:"flex items-center justify-between mb-4"},Se={class:"text-xl font-semibold text-gray-900 dark:text-white"},je={class:"mb-6"},Ve={class:"flex justify-between mb-2"},Ee={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},Fe={class:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"},Ue={key:0,class:"space-y-4"},Le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ne={class:"space-y-2"},Ae={class:"space-y-2"},Be={class:"space-y-2"},Oe={class:"space-y-2"},Ie={class:"space-y-2"},ze={class:"space-y-2"},Te={class:"space-y-2"},We={key:1,class:"space-y-4"},qe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Re={class:"space-y-2"},Ke={class:"space-y-2"},He={class:"text-sm text-gray-500 py-2 px-3"},Ge={class:"space-y-2"},Je={class:"text-sm text-gray-500 py-2 px-3"},Ye={class:"space-y-2"},Qe={key:2,class:"space-y-4"},Xe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ze={class:"space-y-2"},et={class:"space-y-2"},tt={class:"space-y-2"},st={class:"flex items-center"},ot={class:"space-y-2"},rt={class:"space-y-2"},pe=3,lt={__name:"MemberFormModal",props:{show:{type:Boolean,default:!1},isEditMode:{type:Boolean,default:!1},memberData:{type:Object,default:()=>({})},counties:{type:Array,default:()=>[]},constituencies:{type:Array,default:()=>[]},wards:{type:Array,default:()=>[]},subCounties:{type:Array,default:()=>[]},subLocations:{type:Array,default:()=>[]}},emits:["close","save"],setup($,{emit:A}){const v=$,c=A,C={surname:"",other_names:"",id_number:"",phone:"",email:"",gender:"",date_of_birth:"",county_id:null,constituency_id:null,ward_id:null,polling_station:"",occupation:"",education_level:"",disability_status:!1,disability_description:"",next_of_kin_name:"",next_of_kin_phone:"",next_of_kin_relationship:""},P=()=>v.isEditMode&&v.memberData?{...C,...v.memberData}:{...C},s=de(P());h(!1),h(!1);const V=N(()=>s.county_id?constituencies.value.filter(n=>n.county_id==s.county_id):[]),L=N(()=>s.constituency_id?v.wards.filter(n=>n.constituency_id==s.constituency_id):[]);Z(()=>s.county_id,(n,t)=>{n!==t&&(s.constituency_id=null,s.ward_id=null)}),Z(()=>s.constituency_id,(n,t)=>{n!==t&&(s.ward_id=null)});const g=h(1),_=()=>{c("close"),a()},B=()=>{v.isEditMode?s.put(route("members.update",s.id),{preserveScroll:!0,onSuccess:()=>{c("save",s),_()}}):s.post(route("members.store"),{preserveScroll:!0,onSuccess:()=>{c("save",s),_()}})},y=()=>{k(g.value)&&g.value++},E=()=>{g.value--},k=n=>{let t=!0,r="";switch(n){case 1:s.surname.trim()?s.other_names.trim()?s.id_number.trim()?s.phone.trim()?s.phone.length<9&&(r="Please enter a valid phone number",t=!1):(r="Phone number is required",t=!1):(r="ID number is required",t=!1):(r="Other names are required",t=!1):(r="Surname is required",t=!1);break;case 2:s.county_id?s.constituency_id?s.ward_id||(r="Ward is required",t=!1):(r="Constituency is required",t=!1):(r="County is required",t=!1);break;case 3:s.occupation?s.education_level||(r="Education level is required",t=!1):(r="Occupation is required",t=!1);break}return!t&&r&&alert(r),t},a=()=>{s.reset(),s.fill(P()),g.value=1},w=n=>{n.key==="Escape"&&v.show&&_()};return be(()=>{document.addEventListener("keydown",w)}),ye(()=>{document.removeEventListener("keydown",w)}),(n,t)=>$.show?(d(),u("div",$e,[e("div",Ce,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:_}),e("div",De,[e("div",Me,[e("div",Pe,[e("h3",Se,p($.isEditMode?"Update Member":"Add New Member"),1),e("button",{type:"button",onClick:_,class:"text-gray-400 hover:text-gray-500 focus:outline-none"},t[16]||(t[16]=[e("span",{class:"sr-only"},"Close",-1),e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",je,[e("div",Ve,[e("span",Ee," Step "+p(g.value)+" of "+p(pe),1)]),e("div",Fe,[e("div",{class:"bg-green-600 h-2.5 rounded-full",style:ve("width: "+g.value/pe*100+"%")},null,4)])]),g.value===1?(d(),u("div",Ue,[t[27]||(t[27]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"Personal Information",-1)),e("div",Le,[e("div",Ne,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[x(" Surname "),e("span",{class:"text-red-500"},"*")],-1)),f(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=r=>l(s).surname=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:""},null,512),[[F,l(s).surname]])]),e("div",Ae,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[x(" Other Names "),e("span",{class:"text-red-500"},"*")],-1)),f(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=r=>l(s).other_names=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:""},null,512),[[F,l(s).other_names]])]),e("div",Be,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[x(" ID Number "),e("span",{class:"text-red-500"},"*")],-1)),f(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=r=>l(s).id_number=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:""},null,512),[[F,l(s).id_number]])]),e("div",Oe,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[x(" Phone Number "),e("span",{class:"text-red-500"},"*")],-1)),f(e("input",{type:"tel","onUpdate:modelValue":t[3]||(t[3]=r=>l(s).phone=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g. 712345678",required:""},null,512),[[F,l(s).phone]])]),e("div",Ie,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Email ",-1)),f(e("input",{type:"email","onUpdate:modelValue":t[4]||(t[4]=r=>l(s).email=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[F,l(s).email]])]),e("div",ze,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Gender ",-1)),f(e("select",{"onUpdate:modelValue":t[5]||(t[5]=r=>l(s).gender=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},t[22]||(t[22]=[e("option",{value:""},"Select Gender",-1),e("option",{value:"male"},"Male",-1),e("option",{value:"female"},"Female",-1),e("option",{value:"other"},"Other",-1)]),512),[[q,l(s).gender]])]),e("div",Te,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Date of Birth ",-1)),f(e("input",{type:"date","onUpdate:modelValue":t[6]||(t[6]=r=>l(s).date_of_birth=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[F,l(s).date_of_birth]])])]),e("div",{class:"mt-8 flex justify-between"},[t[26]||(t[26]=e("div",null,null,-1)),e("button",{type:"button",onClick:y,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},t[25]||(t[25]=[x(" Next "),e("i",{class:"fas fa-arrow-right ml-2"},null,-1)]))])])):g.value===2?(d(),u("div",We,[t[35]||(t[35]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"Contact Information",-1)),e("div",qe,[e("div",Re,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[x(" County "),e("span",{class:"text-red-500"},"*")],-1)),j(l(ae),{modelValue:l(s).county_id,"onUpdate:modelValue":t[7]||(t[7]=r=>l(s).county_id=r),options:$.counties,label:"name",reduce:r=>r.id,placeholder:"Select County",class:S(["w-full",{"border-red-500":l(s).errors.county_id}]),clearable:!1},{"no-options":O(()=>t[28]||(t[28]=[e("div",{class:"text-sm text-gray-500 py-2 px-3"}," No counties available ",-1)])),_:1},8,["modelValue","options","reduce","class"]),j(ne,{message:l(s).errors.county_id,class:"mt-1 text-sm text-red-600"},null,8,["message"])]),e("div",Ke,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[x(" Constituency "),e("span",{class:"text-red-500"},"*")],-1)),j(l(ae),{modelValue:l(s).constituency_id,"onUpdate:modelValue":t[8]||(t[8]=r=>l(s).constituency_id=r),options:V.value,label:"name",reduce:r=>r.id,placeholder:"Select Constituency",class:S(["w-full",{"border-red-500":l(s).errors.constituency_id}]),disabled:!l(s).county_id,clearable:!1},{"no-options":O(()=>[e("div",He,p(l(s).county_id?"No constituencies found":"Please select a county first"),1)]),_:1},8,["modelValue","options","reduce","class","disabled"]),j(ne,{message:l(s).errors.constituency_id,class:"mt-1 text-sm text-red-600"},null,8,["message"])]),e("div",Ge,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[x(" Ward "),e("span",{class:"text-red-500"},"*")],-1)),j(l(ae),{modelValue:l(s).ward_id,"onUpdate:modelValue":t[9]||(t[9]=r=>l(s).ward_id=r),options:L.value,label:"name",reduce:r=>r.id,placeholder:"Select Ward",class:S(["w-full",{"border-red-500":l(s).errors.ward_id}]),disabled:!l(s).constituency_id,clearable:!1},{"no-options":O(()=>[e("div",Je,p(l(s).constituency_id?"No wards found":"Please select a constituency first"),1)]),_:1},8,["modelValue","options","reduce","class","disabled"]),j(ne,{message:l(s).errors.ward_id,class:"mt-1 text-sm text-red-600"},null,8,["message"])]),e("div",Ye,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Polling Station ",-1)),f(e("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=r=>l(s).polling_station=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Enter your polling station"},null,512),[[F,l(s).polling_station]])])]),e("div",{class:"mt-8 flex justify-between"},[e("button",{type:"button",onClick:E,class:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},t[33]||(t[33]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),x(" Previous ")])),e("button",{type:"button",onClick:y,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},t[34]||(t[34]=[x(" Next "),e("i",{class:"fas fa-arrow-right ml-2"},null,-1)]))])])):g.value===3?(d(),u("div",Qe,[t[44]||(t[44]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"Additional Information",-1)),e("div",Xe,[e("div",Ze,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Occupation ",-1)),f(e("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=r=>l(s).occupation=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[F,l(s).occupation]])]),e("div",et,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Education Level ",-1)),f(e("select",{"onUpdate:modelValue":t[12]||(t[12]=r=>l(s).education_level=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},t[37]||(t[37]=[ke('<option value="">Select Education Level</option><option value="primary">Primary</option><option value="secondary">Secondary</option><option value="diploma">Diploma</option><option value="degree">Degree</option><option value="masters">Masters</option><option value="phd">PhD</option><option value="other">Other</option>',8)]),512),[[q,l(s).education_level]])]),e("div",tt,[e("div",st,[f(e("input",{id:"is_pwd",type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=r=>l(s).is_pwd=r),class:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"},null,512),[[re,l(s).is_pwd]]),t[39]||(t[39]=e("label",{for:"is_pwd",class:"ml-2 block text-sm text-gray-700 dark:text-gray-300"}," Person with Disability (PWD) ",-1))])]),l(s).is_pwd?(d(),u(U,{key:0},[e("div",ot,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Type of Disability ",-1)),f(e("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=r=>l(s).pwd_disability=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[F,l(s).pwd_disability]])]),e("div",rt,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," NCPWD Number ",-1)),f(e("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=r=>l(s).ncpwd_number=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[F,l(s).ncpwd_number]])])],64)):D("",!0)]),e("div",{class:"mt-8 flex justify-between"},[e("button",{type:"button",onClick:E,class:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},t[42]||(t[42]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),x(" Previous ")])),e("button",{type:"button",onClick:B,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},t[43]||(t[43]=[x(" Save Member "),e("i",{class:"fas fa-save ml-2"},null,-1)]))])])):D("",!0)])])])])):D("",!0)}},at={key:0,class:"fixed inset-0 overflow-y-auto z-50","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},nt={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},it={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-6 pt-5 pb-6 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full sm:p-8 relative"},dt={class:"w-full"},ut={class:"mt-4"},ct={class:"space-y-6"},gt={class:"space-y-1 text-center"},mt={class:"flex text-sm text-gray-600 dark:text-gray-300"},ft={class:"relative cursor-pointer bg-white dark:bg-gray-800 rounded-md font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-500 focus-within:outline-none"},pt={key:0,class:"text-sm font-medium text-gray-900 dark:text-gray-100 mt-2"},xt={key:0,class:"space-y-4"},bt={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},yt={class:"space-y-3"},vt={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},kt={class:"col-span-2"},wt=["onUpdate:modelValue"],ht=["value"],_t={class:"space-y-3"},$t={class:"flex items-center"},Ct={class:"mt-6 flex justify-end space-x-3"},Dt=["disabled"],Mt={__name:"ImportMembersModal",props:{show:{type:Boolean,default:!1}},emits:["close","import"],setup($,{emit:A}){const v=A,c=de({file:null,type:"excel",has_headers:!0,update_existing:!1,match_columns:{}}),C=h(null),P=h(!1),s=h([]),V=h(!1),L=t=>{t.preventDefault(),V.value=!0},g=()=>{V.value=!1},_=t=>{t.preventDefault(),V.value=!1;const r=t.dataTransfer.files;if(r.length>0){const b=r[0];b.name.endsWith(".xlsx")?E({target:{files:[b]}}):alert("Please upload a valid .xlsx file")}},B=["surname","other_names","id_number","phone","email","gender","date_of_birth","county","constituency","ward","polling_station","occupation","education_level","disability_status","disability_description","ncpwd_number"],y=()=>{const t=B.join("	")+`
`,r=new Blob([t],{type:"application/vnd.ms-excel"}),b=URL.createObjectURL(r),M=document.createElement("a");M.href=b,M.download="members_import_template.xls",document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(b)},E=t=>{const r=t.target.files[0];if(r){if(!r.name.endsWith(".xlsx")){alert("Please upload a valid .xlsx file");return}c.file=r,k(r)}},k=t=>{if(t.name.endsWith(".csv")){const r=new FileReader;r.onload=b=>{const ee=b.target.result.split(`
`)[0];s.value=ee.split(",").map(te=>te.trim().toLowerCase()),a()},r.readAsText(t)}else t.name.match(/\.xlsx?$/i)&&(P.value=!0)},a=()=>{B.forEach(t=>{const r=s.value.find(b=>b.toLowerCase().includes(t)||t.toLowerCase().includes(b));r?c.match_columns[t]=r:c.match_columns[t]=""})},w=()=>{c.reset(),v("close")},n=()=>{if(!c.file){alert("Please select a file to import");return}const t=new FormData;t.append("file",c.file),t.append("type",c.type),t.append("has_headers",c.has_headers),t.append("update_existing",c.update_existing),c.post(route("members.import"),{preserveScroll:!0,onSuccess:()=>{v("import"),w()},forceFormData:!0})};return(t,r)=>$.show?(d(),u("div",at,[e("div",nt,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:w}),e("div",it,[e("div",dt,[e("div",{class:"flex items-center justify-between mb-4"},[r[3]||(r[3]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Import Members ",-1)),e("button",{type:"button",onClick:w,class:"text-gray-400 hover:text-gray-500 focus:outline-none"},r[2]||(r[2]=[e("span",{class:"sr-only"},"Close",-1),e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",ut,[e("div",ct,[e("div",{class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},[e("div",{class:"flex"},[r[7]||(r[7]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])],-1)),e("div",{class:"ml-3"},[r[5]||(r[5]=e("h3",{class:"text-sm font-medium text-blue-800 dark:text-blue-200"}," Download Template ",-1)),r[6]||(r[6]=e("div",{class:"mt-2 text-sm text-blue-700 dark:text-blue-300"},[e("p",null," Download our Excel template to ensure your file has the correct format. ")],-1)),e("div",{class:"mt-4"},[e("button",{type:"button",onClick:y,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},r[4]||(r[4]=[e("svg",{class:"-ml-0.5 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),x(" Download Template ")]))])])])]),e("div",null,[r[12]||(r[12]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Upload Excel File ",-1)),e("div",{onDragover:we(L,["prevent"]),onDragleave:g,onDrop:_,onClick:r[0]||(r[0]=b=>C.value.click()),class:S([{"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":V.value,"border-gray-300 dark:border-gray-600":!V.value},"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-md transition-colors duration-150 cursor-pointer"])},[e("div",gt,[r[10]||(r[10]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("div",mt,[e("span",ft,[r[8]||(r[8]=e("span",null,"Upload a file",-1)),e("input",{type:"file",ref_key:"fileInput",ref:C,onChange:E,accept:".xlsx",class:"sr-only"},null,544)]),r[9]||(r[9]=e("p",{class:"pl-1"},"or drag and drop",-1))]),r[11]||(r[11]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Excel (.xlsx) up to 5MB ",-1)),l(c).file?(d(),u("p",pt,p(l(c).file.name),1)):D("",!0)])],34)]),P.value&&s.value.length>0?(d(),u("div",xt,[e("div",bt,[r[14]||(r[14]=e("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"}," Map Columns ",-1)),e("div",yt,[(d(),u(U,null,W(B,b=>e("div",{key:b,class:"grid grid-cols-3 gap-4 items-center"},[e("label",vt,p(b.replace(/_/g," ")),1),e("div",kt,[f(e("select",{"onUpdate:modelValue":M=>l(c).match_columns[b]=M,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[r[13]||(r[13]=e("option",{value:""},"-- Select Column --",-1)),(d(!0),u(U,null,W(s.value,M=>(d(),u("option",{key:M,value:M},p(M),9,ht))),128))],8,wt),[[q,l(c).match_columns[b]]])])])),64))])])])):D("",!0),e("div",_t,[e("div",$t,[f(e("input",{id:"update-existing","onUpdate:modelValue":r[1]||(r[1]=b=>l(c).update_existing=b),type:"checkbox",checked:"",disabled:"",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 rounded bg-gray-100 dark:bg-gray-700 cursor-not-allowed"},null,512),[[re,l(c).update_existing]]),r[15]||(r[15]=e("label",{for:"update-existing",class:"ml-2 block text-sm text-gray-700 dark:text-gray-400"}," Update existing members (match by ID Number) ",-1))])])])]),e("div",Ct,[e("button",{type:"button",onClick:w,class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Cancel "),e("button",{type:"button",onClick:n,disabled:!l(c).file,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"}," Import ",8,Dt)])])])])])):D("",!0)}},Pt={key:0,class:"fixed inset-0 overflow-y-auto z-50","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},St={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},jt={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-6 pt-5 pb-6 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-8 relative"},Vt={class:"w-full"},Et={class:"mt-4"},Ft={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ut={class:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4"},Lt={class:"flex items-center"},Nt={class:"flex flex-col md:flex-row items-center md:items-stretch"},At={class:"flex flex-col md:flex-row items-center md:items-stretch"},Bt={class:"flex flex-col md:flex-row items-center md:items-stretch"},Ot={class:"flex items-center"},It={class:"md:col-span-2 border-t border-gray-200 dark:border-gray-700 pt-4"},zt={key:0,class:"mt-3 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2"},Tt=["id","value","checked","onChange"],Wt=["for"],qt={class:"md:col-span-2 border-t border-gray-200 dark:border-gray-700 pt-4"},Rt={key:0,class:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-4"},Kt=["value"],Ht=["disabled"],Gt=["value"],Jt=["disabled"],Yt=["value"],Qt=["disabled"],Xt={class:"md:col-span-2 border-t border-gray-200 dark:border-gray-700 pt-4"},Zt={key:0,class:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-4"},es={__name:"ExportMembersModal",props:{show:{type:Boolean,default:!1},onClose:{type:Function,default:()=>{}},onExport:{type:Function,default:()=>{}}},emits:["close","export"],setup($,{emit:A}){const v=A,c=h(!0),C=h(!0),P=h(!0),s=de({format:"excel",include_headers:!0,fields:["surname","other_names","id_number","phone","email","county","constituency","ward","polling_station"],filters:{county_id:null,constituency_id:null,ward_id:null,polling_station:null,date_from:"",date_to:""}}),V=ie(),L=N(()=>V.props.locations||{counties:[],constituencies:[],wards:[]}),g=h([]),_=h([]);Z(()=>s.filters.county_id,k=>{var a;k?g.value=((a=L.value.constituencies)==null?void 0:a.filter(w=>w.county_id==k))||[]:g.value=[],s.filters.constituency_id=null,s.filters.ward_id=null,s.filters.polling_station=null,_.value=[]}),Z(()=>s.filters.constituency_id,k=>{var a;k?_.value=((a=L.value.wards)==null?void 0:a.filter(w=>w.constituency_id==k))||[]:_.value=[],s.filters.ward_id=null,s.filters.polling_station=null}),Z(()=>s.filters.ward_id,k=>{k||(s.filters.polling_station=null)});const B=[{value:"surname",label:"Surname"},{value:"other_names",label:"Other Names"},{value:"id_number",label:"ID Number"},{value:"phone",label:"Phone"},{value:"email",label:"Email"},{value:"gender",label:"Gender"},{value:"date_of_birth",label:"Date of Birth"},{value:"county",label:"County"},{value:"constituency",label:"Constituency"},{value:"ward",label:"Ward"},{value:"polling_station",label:"Polling Station"},{value:"occupation",label:"Occupation"},{value:"education_level",label:"Education Level"},{value:"is_pwd",label:"Is PWD"},{value:"pwd_disability",label:"PWD Disability"},{value:"ncpwd_number",label:"NCPWD Number"},{value:"created_at",label:"Date Registered"}],y=()=>{s.reset(),v("close")},E=()=>{const k=new URLSearchParams;k.append("format",s.format),s.include_headers&&k.append("include_headers","1"),s.fields.forEach(a=>{k.append("fields[]",a)}),Object.entries(s.filters).forEach(([a,w])=>{w&&k.append(`filters[${a}]`,w)}),window.location.href=route("members.export")+"?"+k.toString(),v("export"),y()};return(k,a)=>{var w;return $.show?(d(),u("div",Pt,[e("div",St,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:y}),e("div",jt,[e("div",Vt,[e("div",{class:"flex items-center justify-between mb-4"},[a[15]||(a[15]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Export Members ",-1)),e("button",{type:"button",onClick:y,class:"text-gray-400 hover:text-gray-500 focus:outline-none"},a[14]||(a[14]=[e("span",{class:"sr-only"},"Close",-1),e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Et,[e("div",Ft,[e("div",Ut,[e("div",Lt,[e("div",Nt,[f(e("input",{id:"format-excel","onUpdate:modelValue":a[0]||(a[0]=n=>l(s).format=n),type:"radio",value:"excel",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 rounded"},null,512),[[le,l(s).format]]),a[16]||(a[16]=e("label",{for:"format-excel",class:"ml-2 block text-sm text-gray-700 dark:text-gray-300"}," Excel (.xlsx) ",-1))]),e("div",At,[f(e("input",{id:"format-csv","onUpdate:modelValue":a[1]||(a[1]=n=>l(s).format=n),type:"radio",value:"csv",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 rounded"},null,512),[[le,l(s).format]]),a[17]||(a[17]=e("label",{for:"format-csv",class:"ml-2 block text-sm text-gray-700 dark:text-gray-300"}," CSV (.csv) ",-1))]),e("div",Bt,[f(e("input",{id:"format-pdf","onUpdate:modelValue":a[2]||(a[2]=n=>l(s).format=n),type:"radio",value:"pdf",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 rounded"},null,512),[[le,l(s).format]]),a[18]||(a[18]=e("label",{for:"format-pdf",class:"ml-2 block text-sm text-gray-700 dark:text-gray-300"}," PDF (.pdf) ",-1))])]),e("div",Ot,[f(e("input",{id:"include-headers","onUpdate:modelValue":a[3]||(a[3]=n=>l(s).include_headers=n),type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 rounded"},null,512),[[re,l(s).include_headers]]),a[19]||(a[19]=e("label",{for:"include-headers",class:"ml-2 block text-sm text-gray-700 dark:text-gray-300"}," Include Headers ",-1))])]),e("div",It,[e("button",{type:"button",onClick:a[4]||(a[4]=n=>c.value=!c.value),class:"w-full flex justify-between items-center text-left focus:outline-none"},[a[21]||(a[21]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Select Fields to Export ",-1)),(d(),u("svg",{class:S([{"transform rotate-180":c.value,"transform rotate-0":!c.value},"h-5 w-5 text-gray-500 transition-transform duration-200"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},a[20]||(a[20]=[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))]),c.value?(d(),u("div",zt,[(d(),u(U,null,W(B,n=>e("div",{key:n.value,class:"flex items-center"},[f(e("input",{id:`field-${n.value}`,"onUpdate:modelValue":a[5]||(a[5]=t=>l(s).fields=t),value:n.value,type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 rounded",checked:l(s).fields.length===1&&l(s).fields[0]===n.value,onChange:t=>l(s).fields=[n.value]},null,40,Tt),[[re,l(s).fields]]),e("label",{for:`field-${n.value}`,class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},p(n.label),9,Wt)])),64))])):D("",!0)]),e("div",qt,[e("button",{type:"button",onClick:a[6]||(a[6]=n=>C.value=!C.value),class:"w-full flex justify-between items-center text-left focus:outline-none"},[a[23]||(a[23]=e("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Location Filters (Optional) ",-1)),(d(),u("svg",{class:S([{"transform rotate-180":C.value,"transform rotate-0":!C.value},"h-5 w-5 text-gray-500 transition-transform duration-200"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},a[22]||(a[22]=[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))]),C.value?(d(),u("div",Rt,[e("div",null,[a[25]||(a[25]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," County ",-1)),f(e("select",{"onUpdate:modelValue":a[7]||(a[7]=n=>l(s).filters.county_id=n),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[a[24]||(a[24]=e("option",{value:null},"All Counties",-1)),(d(!0),u(U,null,W(((w=L.value)==null?void 0:w.counties)||[],n=>(d(),u("option",{key:n.id,value:n.id},p(n.name),9,Kt))),128))],512),[[q,l(s).filters.county_id]])]),e("div",null,[a[27]||(a[27]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Constituency ",-1)),f(e("select",{"onUpdate:modelValue":a[8]||(a[8]=n=>l(s).filters.constituency_id=n),disabled:!l(s).filters.county_id,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md disabled:opacity-50"},[a[26]||(a[26]=e("option",{value:null},"All Constituencies",-1)),(d(!0),u(U,null,W(g.value,n=>(d(),u("option",{key:n.id,value:n.id},p(n.name),9,Gt))),128))],8,Ht),[[q,l(s).filters.constituency_id]])]),e("div",null,[a[29]||(a[29]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Ward ",-1)),f(e("select",{"onUpdate:modelValue":a[9]||(a[9]=n=>l(s).filters.ward_id=n),disabled:!l(s).filters.constituency_id,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md disabled:opacity-50"},[a[28]||(a[28]=e("option",{value:null},"All Wards",-1)),(d(!0),u(U,null,W(_.value,n=>(d(),u("option",{key:n.id,value:n.id},p(n.name),9,Yt))),128))],8,Jt),[[q,l(s).filters.ward_id]])]),e("div",null,[a[31]||(a[31]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Polling Station ",-1)),f(e("select",{"onUpdate:modelValue":a[10]||(a[10]=n=>l(s).filters.polling_station=n),disabled:!l(s).filters.ward_id,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md disabled:opacity-50"},a[30]||(a[30]=[e("option",{value:null},"All Polling Stations",-1)]),8,Qt),[[q,l(s).filters.polling_station]])])])):D("",!0)]),e("div",Xt,[e("button",{type:"button",onClick:a[11]||(a[11]=n=>P.value=!P.value),class:"w-full flex justify-between items-center text-left focus:outline-none"},[a[33]||(a[33]=e("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Date Filters (Optional) ",-1)),(d(),u("svg",{class:S([{"transform rotate-180":P.value,"transform rotate-0":!P.value},"h-5 w-5 text-gray-500 transition-transform duration-200"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},a[32]||(a[32]=[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))]),P.value?(d(),u("div",Zt,[e("div",null,[a[34]||(a[34]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," From Date ",-1)),f(e("input",{"onUpdate:modelValue":a[12]||(a[12]=n=>l(s).filters.date_from=n),type:"date",class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},null,512),[[F,l(s).filters.date_from]])]),e("div",null,[a[35]||(a[35]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," To Date ",-1)),f(e("input",{"onUpdate:modelValue":a[13]||(a[13]=n=>l(s).filters.date_to=n),type:"date",class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},null,512),[[F,l(s).filters.date_to]])])])):D("",!0)])])]),e("div",{class:"mt-6 flex justify-end space-x-3"},[e("button",{type:"button",onClick:y,class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Cancel "),e("button",{type:"button",onClick:E,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Export ")])])])])])):D("",!0)}}},ts={class:"min-h-screen bg-white dark:bg-gray-900"},ss={class:"py-6 sm:py-8"},os={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},rs={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10"},ls={class:"p-6"},as={class:"flex items-center"},ns={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},is={class:"flex items-center"},ds={class:"text-2xl font-semibold text-gray-900 dark:text-white"},us={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},cs={key:0,class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-10"},gs={class:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700"},ms={class:"p-6"},fs={class:"space-y-2"},ps={key:0,class:"text-center py-8 text-gray-500 dark:text-gray-400"},xs={class:"flex-shrink-0"},bs=["title"],ys={class:"ml-4 flex-1 min-w-0"},vs={class:"flex items-center justify-between"},ks={class:"text-sm font-medium text-gray-900 dark:text-white"},ws={class:"flex flex-wrap items-center mt-1 text-xs text-gray-500 dark:text-gray-400 gap-1"},hs={class:"flex items-center capitalize"},_s={key:1},$s=["title"],Cs={class:"flex items-center"},Ds={class:"flex items-center"},Ms={key:0,class:"mt-4 text-right"},Ps={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700"},Ss={class:"p-6"},js={class:"space-y-2"},Vs={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700 mb-10"},Es={class:"p-6"},Fs={class:"flex justify-between items-center mb-4"},Us=["title"],Ls={class:"space-y-3"},Ns={class:"flex items-center p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200"},As={class:"flex-1 min-w-0"},Bs={class:"flex justify-between items-center w-full text-xs text-gray-500 dark:text-gray-400"},Os={class:"flex-shrink-0"},Is=["href"],zs={class:"flex items-center p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200"},Ts={class:"flex-1 min-w-0"},Ws={class:"flex justify-between items-center w-full text-xs text-gray-500 dark:text-gray-400"},qs={class:"flex-shrink-0"},Rs=["href"],Ks={class:"flex items-center p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200"},Hs={class:"flex-1 min-w-0"},Gs={class:"flex justify-between items-center w-full text-xs text-gray-500 dark:text-gray-400"},Js={class:"flex-shrink-0"},Ys=["href"],Qs={class:"flex items-center p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200"},Xs={class:"flex-1 min-w-0"},Zs={class:"w-full"},eo={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center w-full text-xs text-gray-500 dark:text-gray-400 gap-1"},to={class:"flex-shrink-0"},so=["href"],oo={__name:"Welcome",setup($){var M,ee,te,ue;const{props:A}=ie();h("personal");const v=h(!1),c=h(!1),C=h(!1),P=()=>{v.value=!v.value},s=()=>{c.value=!c.value},V=()=>{C.value=!C.value},L=N(()=>{var m;return((m=A.auth)==null?void 0:m.user)||null}),g=N(()=>{var m;return((m=L.value)==null?void 0:m.profile)||{}});N(()=>{var o,I,z,T,R,K,H,G,J,Y,Q,i,se,X,ce,ge,me,fe;if(!L.value)return"Not provided";const m=[(o=g.value)==null?void 0:o.address_line_1,(I=g.value)==null?void 0:I.address_line_2,(z=g.value)==null?void 0:z.city,(T=g.value)==null?void 0:T.state,(K=(R=g.value)==null?void 0:R.citizen)==null?void 0:K.uuid,(J=(G=(H=g.value)==null?void 0:H.citizen)==null?void 0:G.county)==null?void 0:J.name,(i=(Q=(Y=g.value)==null?void 0:Y.citizen)==null?void 0:Q.sub_county)==null?void 0:i.name,(ce=(X=(se=g.value)==null?void 0:se.citizen)==null?void 0:X.constituency)==null?void 0:ce.name,(fe=(me=(ge=g.value)==null?void 0:ge.citizen)==null?void 0:me.ward)==null?void 0:fe.name].filter(Boolean);return m.length>0?m.join(", "):"Not provided"}),N(()=>{var m,o;return((o=(m=g.value)==null?void 0:m.religion)==null?void 0:o.name)||"Not specified"}),N(()=>{var m,o;return((o=(m=g.value)==null?void 0:m.ethnicity)==null?void 0:o.name)||"Not specified"}),N(()=>{var o,I,z,T;return((o=g.value)==null?void 0:o.disability_status)===!0||((I=g.value)==null?void 0:I.disability_status)==="true"||((z=g.value)==null?void 0:z.disability_status)==="1"||((T=g.value)==null?void 0:T.disability_status)==="yes"?"Yes":"No"}),h(!1),h("");const _=h(!1),B=()=>{_.value=!_.value},y=ie().props,E=y.auth,k=m=>{v.value=!1},a=()=>{c.value=!1},w=()=>{C.value=!1},n=y.data||{},t=N(()=>{var m;return Array.isArray((m=E==null?void 0:E.user)==null?void 0:m.roles)&&E.user.roles.includes("administrator")});console.log("Page props:",y),console.log("Nested data:",n);const r=(n==null?void 0:n.stats)||((M=n==null?void 0:n.data)==null?void 0:M.stats)||{total_users:{count:0,change:0,title:"Total Users",icon:"fa-users",color:"blue"},active_users:{count:0,change:0,title:"Active Users",icon:"fa-user-check",color:"green"},new_members_this_month:{count:0,change:0,title:"New Members This Month",icon:"fa-user-plus",color:"purple"},engagement_rate:{count:0,change:0,title:"Engagement Rate",icon:"fa-chart-line",color:"yellow"},donations:{count:0,change:0,title:"Donations",icon:"fa-donate",color:"indigo"},monthly_subscriptions:{count:0,change:0,title:"Monthly Subscriptions",icon:"fa-calendar-alt",color:"pink"},membership_fees:{count:0,change:0,title:"Membership Fees",icon:"fa-id-card",color:"red"},pending_approvals:{count:0,change:0,title:"Pending Approvals",icon:"fa-clock",color:"orange"},candidates:{count:0,change:0,title:"Candidates",icon:"fa-user-tie",color:"teal"},nomination_papers:{count:0,change:0,title:"Nomination Papers",icon:"fa-file-signature",color:"blue"},compliance_items:{count:0,change:0,title:"Compliance Items",icon:"fa-clipboard-check",color:"green"},deadlines:{count:0,change:0,title:"Deadlines",icon:"fa-clock",color:"red"},departments:{count:0,change:0,title:"Departments",icon:"fa-building",color:"indigo"},services:{count:0,change:0,title:"Services",icon:"fa-concierge-bell",color:"purple"},projects:{count:0,change:0,title:"Projects",icon:"fa-project-diagram",color:"yellow"},press_releases:{count:0,change:0,title:"Press Releases",icon:"fa-newspaper",color:"blue"},social_media_reach:{count:0,change:0,title:"Social Media Reach",icon:"fa-share-alt",color:"pink"},upcoming_events:{count:0,change:0,title:"Upcoming Events",icon:"fa-calendar-alt",color:"green"},meetings_this_week:{count:0,change:0,title:"Meetings This Week",icon:"fa-users",color:"indigo"},active_volunteers:{count:0,change:0,title:"Active Volunteers",icon:"fa-hands-helping",color:"orange"},volunteer_hours:{count:0,change:0,title:"Volunteer Hours",icon:"fa-clock",color:"teal"},youth_members:{count:0,change:0,title:"Youth Members",icon:"fa-user-graduate",color:"blue"},women_members:{count:0,change:0,title:"Women Members",icon:"fa-female",color:"pink"}},b=(n==null?void 0:n.activities)||((ee=n==null?void 0:n.data)==null?void 0:ee.activities)||[];return n!=null&&n.roles||(te=n==null?void 0:n.data)!=null&&te.roles,n!=null&&n.user||(ue=n==null?void 0:n.data)!=null&&ue.user,console.log("Activities:",b),console.log("Has admin role:",t.value),(m,o)=>{var I,z,T,R,K,H,G,J,Y,Q;return d(),u("div",ts,[e("section",ss,[e("div",os,[e("div",rs,[(d(!0),u(U,null,W(Object.entries(l(r)),(i,se)=>{var X;return d(),u("div",{key:se,class:"bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700 hover:shadow-lg transition-shadow duration-200"},[e("div",ls,[e("div",as,[e("div",{class:S(["p-3 rounded-lg mr-4",`bg-${i[1].color}-50 dark:bg-${i[1].color}-900/20`])},[e("i",{class:S(`${i[1].icon} text-${i[1].color}-500 dark:text-${i[1].color}-400 text-xl`)},null,2)],2),e("div",null,[e("p",ns,p(i[1].title),1),e("div",is,[e("p",ds,p((X=i[1].count)==null?void 0:X.toLocaleString()),1),i[1].change!==void 0?(d(),u("span",{key:0,class:S(["ml-2 text-sm font-medium",{"text-green-500 dark:text-green-400":i[1].change>0,"text-red-500 dark:text-red-400":i[1].change<0,"text-gray-500":i[1].change===0}])},p(i[1].change>0?"+":"")+p(i[1].change)+p(i[1].change!==0?"%":""),3)):D("",!0)]),i[1].percentage_change!==void 0?(d(),u("p",us,p(i[1].percentage_change>0?"+":"")+p(i[1].percentage_change)+"% from last period ",1)):D("",!0)])])])])}),128))]),t.value?(d(),u("div",cs,[e("div",gs,[e("div",ms,[o[9]||(o[9]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white flex items-center mb-4"},[e("i",{class:"fas fa-history text-primary-600 dark:text-primary-400 mr-2"}),x(" Latest Activities ")],-1)),o[10]||(o[10]=e("p",{class:"text-sm font-normal text-gray-500 dark:text-gray-400 mb-4"}," These activity logs are pulled from all the models in the database using the Laravel Spatie Audit Trail package. ",-1)),e("div",fs,[!l(b)||l(b).length===0?(d(),u("div",ps,o[0]||(o[0]=[e("i",{class:"fas fa-inbox text-4xl mb-2 opacity-50"},null,-1),e("p",null,"No recent activities found",-1)]))):(d(!0),u(U,{key:1},W(l(b),i=>(d(),u("div",{key:i.id,class:"flex items-start group hover:bg-gray-50 dark:hover:bg-gray-700/50 p-2 rounded-lg transition-colors duration-200"},[e("div",xs,[e("div",{class:S(["h-10 w-10 rounded-full flex items-center justify-center",["bg-opacity-10",i.color==="blue"?"bg-blue-500":i.color==="green"?"bg-green-500":i.color==="red"?"bg-red-500":i.color==="yellow"?"bg-yellow-500":i.color==="purple"?"bg-purple-500":"bg-gray-500"]])},[e("i",{class:S(["fas",i.icon||"fa-info-circle","text-lg",i.color==="blue"?"text-blue-500":i.color==="green"?"text-green-500":i.color==="red"?"text-red-500":i.color==="yellow"?"text-yellow-500":i.color==="purple"?"text-purple-500":"text-gray-500"]),title:i.action||"Activity"},null,10,bs)],2)]),e("div",ys,[e("div",vs,[e("p",ks,p(i.title||"System Activity"),1),e("span",{class:S(["text-xs px-2 py-0.5 rounded-full",[i.status_class==="success"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":i.status_class==="warning"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":i.status_class==="danger"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"]])},p(i.status||"Completed"),3)]),e("div",ws,[e("div",hs,[o[1]||(o[1]=e("i",{class:"far fa-user mr-1"},null,-1)),e("span",null,[i.user_id?(d(),xe(l(oe),{key:0,href:m.route("profile.view",{user_id:i.user_id}),class:"text-green-600 hover:underline underline-offset-4"},{default:O(()=>[x(p(i.user_name),1)]),_:2},1032,["href"])):(d(),u("span",_s,"System"))])]),o[7]||(o[7]=e("span",null,"•",-1)),e("div",{class:"flex items-center",title:"Created "+i.created_at},[o[2]||(o[2]=e("i",{class:"far fa-clock mr-1"},null,-1)),e("span",null,p(i.created_at),1)],8,$s),i.service_name?(d(),u(U,{key:0},[o[4]||(o[4]=e("span",null,"•",-1)),e("div",Cs,[o[3]||(o[3]=e("i",{class:"fas fa-cog mr-1"},null,-1)),e("span",null,p(i.service_name),1)])],64)):D("",!0),i.department_name?(d(),u(U,{key:1},[o[6]||(o[6]=e("span",null,"•",-1)),e("div",Ds,[o[5]||(o[5]=e("i",{class:"fas fa-building mr-1"},null,-1)),e("span",null,p(i.department_name),1)])],64)):D("",!0)])])]))),128))]),l(b)&&l(b).length>0?(d(),u("div",Ms,[j(l(oe),{href:m.route("activity"),class:"text-sm font-medium text-primary-600 hover:text-green-700 dark:text-primary-400 dark:hover:text-primary-300 hover:underline underline-offset-4"},{default:O(()=>o[8]||(o[8]=[x(" View all activities "),e("i",{class:"fas fa-arrow-right ml-1"},null,-1)])),_:1,__:[8]},8,["href"])])):D("",!0)])]),e("div",Ps,[e("div",Ss,[o[15]||(o[15]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white flex items-center mb-4"},[e("i",{class:"fas fa-bolt text-primary-600 dark:text-primary-400 mr-2"}),x(" Quick Actions ")],-1)),o[16]||(o[16]=e("p",{class:"text-sm font-normal text-gray-500 dark:text-gray-400 mb-4"}," These are some quick actions to help you get started. ",-1)),e("div",js,[e("button",{type:"button",onClick:P,class:"w-full text-left flex items-center p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 text-gray-700 dark:text-gray-300"},o[11]||(o[11]=[e("i",{class:"fas fa-plus-circle text-green-500 w-5 h-5 mr-3"},null,-1),e("span",null,"Add New Member",-1)])),e("button",{type:"button",onClick:s,class:"w-full text-left flex items-center p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 text-gray-700 dark:text-gray-300"},o[12]||(o[12]=[e("i",{class:"fas fa-file-import text-blue-500 w-5 h-5 mr-3"},null,-1),e("span",null,"Import Members",-1)])),e("button",{type:"button",onClick:V,class:"w-full text-left flex items-center p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 text-gray-700 dark:text-gray-300"},o[13]||(o[13]=[e("i",{class:"fas fa-file-export text-purple-500 w-5 h-5 mr-3"},null,-1),e("span",null,"Export Members",-1)])),j(l(oe),{href:m.route("settings"),class:"flex items-center p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 text-gray-700 dark:text-gray-300"},{default:O(()=>o[14]||(o[14]=[e("i",{class:"fas fa-cog text-gray-500 w-5 h-5 mr-3"},null,-1),e("span",null,"Settings",-1)])),_:1,__:[14]},8,["href"])])])])])):D("",!0),e("div",Vs,[e("div",Es,[e("div",Fs,[o[17]||(o[17]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white flex items-center"},[e("i",{class:"fas fa-book-open text-primary-600 dark:text-primary-400 mr-2"}),x(" Library ")],-1)),e("button",{onClick:B,class:"p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",title:_.value?"Hide Documents":"Show Documents"},[e("i",{class:S(["fas",_.value?"fa-chevron-up":"fa-chevron-down"])},null,2)],8,Us)]),o[46]||(o[46]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-4"}," Download important party documents and resources ",-1)),f(e("div",Ls,[e("div",Ns,[o[23]||(o[23]=e("div",{class:"w-10 h-10 flex items-center justify-center bg-blue-50 dark:bg-blue-900/20 rounded-lg mr-3"},[e("i",{class:"fas fa-book-open text-blue-500 dark:text-blue-400 text-lg"})],-1)),e("div",As,[o[21]||(o[21]=e("p",{class:"text-sm font-medium text-gray-900 dark:text-white"}," Party Ideology ",-1)),o[22]||(o[22]=e("p",{class:"text-xs text-gray-600 dark:text-gray-300 mt-1 mb-1"}," Core principles and beliefs that guide the Forward Kenya Party ",-1)),e("div",Bs,[e("span",Os,[e("a",{href:m.route("profile.view",1),class:"text-gray-500 dark:text-gray-400 hover:text-green-600 hover:underline hover:decoration-green-600 underline-offset-4"},"FKP Admin",8,Is),o[18]||(o[18]=x(" • ")),o[19]||(o[19]=e("span",{class:"text-gray-400 dark:text-gray-500"},"15 June 2025",-1))]),o[20]||(o[20]=e("span",{class:"ml-2 whitespace-nowrap"},[e("i",{class:"far fa-file-pdf mr-1"}),x(" PDF • 2.4 MB")],-1))])]),o[24]||(o[24]=e("a",{href:"/assets/FKP_Documents/FKP IDEOLOGY.pdf",download:"",target:"_blank",class:"p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200",title:"Download party ideology document"},[e("i",{class:"fas fa-arrow-down text-green-600"})],-1))]),e("div",zs,[o[30]||(o[30]=e("div",{class:"w-10 h-10 flex items-center justify-center bg-green-50 dark:bg-green-900/20 rounded-lg mr-3"},[e("i",{class:"fas fa-file-alt text-green-500 dark:text-green-400 text-lg"})],-1)),e("div",Ts,[o[28]||(o[28]=e("p",{class:"text-sm font-medium text-gray-900 dark:text-white"}," Party Manifesto ",-1)),o[29]||(o[29]=e("p",{class:"text-xs text-gray-600 dark:text-gray-300 mt-1 mb-1"}," Our comprehensive plan and commitments for national development ",-1)),e("div",Ws,[e("span",qs,[e("a",{href:m.route("profile.view",1),class:"text-gray-500 dark:text-gray-400 hover:text-green-600 hover:underline hover:decoration-green-600 underline-offset-4"},"FKP Admin",8,Rs),o[25]||(o[25]=x(" • ")),o[26]||(o[26]=e("span",{class:"text-gray-400 dark:text-gray-500"},"15 June 2025",-1))]),o[27]||(o[27]=e("span",{class:"ml-2 whitespace-nowrap"},[e("i",{class:"far fa-file-pdf mr-1"}),x(" PDF • 1.8 MB")],-1))])]),o[31]||(o[31]=e("a",{href:"/assets/FKP_Documents/FKP MANIFESTO (1).pdf",download:"",target:"_blank",class:"p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200",title:"Download party manifesto document"},[e("i",{class:"fas fa-arrow-down text-green-600"})],-1))]),e("div",Ks,[o[37]||(o[37]=e("div",{class:"w-10 h-10 flex items-center justify-center bg-purple-50 dark:bg-purple-900/20 rounded-lg mr-3"},[e("i",{class:"fas fa-scroll text-purple-500 dark:text-purple-400 text-lg"})],-1)),e("div",Hs,[o[35]||(o[35]=e("p",{class:"text-sm font-medium text-gray-900 dark:text-white"}," Party Constitution ",-1)),o[36]||(o[36]=e("p",{class:"text-xs text-gray-600 dark:text-gray-300 mt-1 mb-1"}," Legal framework and structure of the Forward Kenya Party ",-1)),e("div",Gs,[e("span",Js,[e("a",{href:m.route("profile.view",1),class:"text-gray-500 dark:text-gray-400 hover:text-green-600 hover:underline hover:decoration-green-600 underline-offset-4"},"FKP Admin",8,Ys),o[32]||(o[32]=x(" • ")),o[33]||(o[33]=e("span",{class:"text-gray-400 dark:text-gray-500"},"15 June 2025",-1))]),o[34]||(o[34]=e("span",{class:"ml-2 whitespace-nowrap"},[e("i",{class:"far fa-file-pdf mr-1"}),x(" PDF • 3.1 MB")],-1))])]),o[38]||(o[38]=e("a",{href:"/assets/FKP_Documents/FORWARD KENYA PARTY CONSTITUTION.pdf",download:"",target:"_blank",class:"p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200",title:"Download party constitution document"},[e("i",{class:"fas fa-arrow-down text-green-600"})],-1))]),e("div",Qs,[o[44]||(o[44]=e("div",{class:"w-10 h-10 flex items-center justify-center bg-yellow-50 dark:bg-yellow-900/20 rounded-lg mr-3"},[e("i",{class:"fas fa-file-contract text-yellow-500 dark:text-yellow-400 text-lg"})],-1)),e("div",Xs,[o[42]||(o[42]=e("p",{class:"text-sm font-medium text-gray-900 dark:text-white"}," Party Nomination Rules ",-1)),o[43]||(o[43]=e("p",{class:"text-xs text-gray-600 dark:text-gray-300 mt-1 mb-1"}," Guidelines and procedures for party nominations and elections ",-1)),e("div",Zs,[e("div",eo,[e("span",to,[e("a",{href:m.route("profile.view",1),class:"text-gray-500 dark:text-gray-400 hover:text-green-600 hover:underline hover:decoration-green-600 underline-offset-4"},"FKP Admin",8,so),o[39]||(o[39]=x(" • ")),o[40]||(o[40]=e("span",{class:"text-gray-400 dark:text-gray-500"},"15 June 2025",-1))]),o[41]||(o[41]=e("div",{class:"flex items-center gap-1"},[e("i",{class:"far fa-file-pdf"}),e("span",null,"PDF"),e("span",null,"•"),e("span",null,"2.4 MB")],-1))])])]),o[45]||(o[45]=e("a",{href:"/assets/FKP_Documents/NOMINATION_RULES_AMMENDED 12.5.25.pdf",download:"",target:"_blank",class:"p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200",title:"Download party nomination rules document"},[e("i",{class:"fas fa-arrow-down text-green-600"})],-1))])],512),[[he,_.value]])])])])]),j(lt,{show:v.value,counties:((I=l(y).locations)==null?void 0:I.counties)||[],constituencies:((z=l(y).locations)==null?void 0:z.constituencies)||[],wards:((T=l(y).locations)==null?void 0:T.wards)||[],subCounties:((R=l(y).locations)==null?void 0:R.subCounties)||[],subLocations:((K=l(y).locations)==null?void 0:K.subLocations)||[],onClose:P,onSave:k},null,8,["show","counties","constituencies","wards","subCounties","subLocations"]),j(Mt,{show:c.value,onClose:s,onImport:a},null,8,["show"]),j(es,{show:C.value,counties:((H=l(y).locations)==null?void 0:H.counties)||[],constituencies:((G=l(y).locations)==null?void 0:G.constituencies)||[],wards:((J=l(y).locations)==null?void 0:J.wards)||[],subCounties:((Y=l(y).locations)==null?void 0:Y.subCounties)||[],subLocations:((Q=l(y).locations)==null?void 0:Q.subLocations)||[],onClose:V,onExport:w},null,8,["show","counties","constituencies","wards","subCounties","subLocations"])])}}},ro={class:"flex justify-between items-center"},lo={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},ao={"aria-label":"Breadcrumb",class:"flex"},no={class:"inline-flex items-center space-x-1 md:space-x-3"},io={class:"inline-flex items-center"},uo={class:"py-0 md:py-6"},co={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},go={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},bo={__name:"Dashboard",props:{title:{type:String,required:!0},data:{type:Object,required:!0}},setup($){return(A,v)=>(d(),xe(_e,{title:$.title},{header:O(()=>[e("div",ro,[e("h2",lo,p($.title),1),e("nav",ao,[e("ol",no,[e("li",io,[j(l(oe),{href:A.route("dashboard"),class:"inline-flex items-center text-sm font-medium text-gray-700 dark:text-gray-400 hover:text-green-600 dark:hover:text-green-400"},{default:O(()=>v[0]||(v[0]=[e("i",{class:"fas fa-home mr-2"},null,-1),x(" Dashboard ")])),_:1,__:[0]},8,["href"])])])])])]),default:O(()=>[e("div",uo,[e("div",co,[e("div",go,[j(oo,{activities:$.data.activities,stats:$.data.stats,"featured-services":$.data.featuredServices,"featured-departments":$.data.featuredDepartments,"featured-projects":$.data.featuredProjects},null,8,["activities","stats","featured-services","featured-departments","featured-projects"])])])])]),_:1},8,["title"]))}};export{bo as default};
//# sourceMappingURL=Dashboard-BHQkBzh2.js.map

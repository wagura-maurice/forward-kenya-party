import{K as $e,A as te,u as he,d as _,B as w,e as d,o as a,b as n,f as P,w as f,g as s,h as p,n as F,a as i,y as V,c as Te,z as R,G as Ie,k as Y,F as O,i as $,t as x,D as I,l as Le,O as ze,S as k,P as Ve,Q as De}from"./app-D3IMUQkf.js";import{_ as Ne}from"./ActionMessage-DKW70r_u.js";import{_ as Ue}from"./FormSection-B9TneODC.js";import{a as y,_ as T}from"./TextInput-5MbYsfk7.js";import{_ as b}from"./InputLabel-D1G057WK.js";import{_ as Me}from"./PrimaryButton-RBIuLhir.js";import{_ as Ce}from"./SecondaryButton-DRUfHjf9.js";import"./SectionTitle-D3r2hlOH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const je={key:0,class:"col-span-6 sm:col-span-4"},Ae={class:"mt-2"},qe=["src","alt"],Fe={class:"mt-2"},Re={class:"col-span-6 space-y-4"},He={class:"border rounded-lg overflow-hidden dark:border-gray-700"},We={class:"p-6 bg-white dark:bg-gray-900"},Ke={class:"grid grid-cols-6 gap-6"},Ge={class:"col-span-6 sm:col-span-3"},Ye={class:"col-span-6 sm:col-span-3"},Je={class:"col-span-6 sm:col-span-3"},Qe={class:"col-span-6 sm:col-span-3"},Xe=["value","selected"],Ze={class:"col-span-6 sm:col-span-3"},et=["value","selected"],tt={class:"col-span-6 sm:col-span-3"},it=["value","selected"],ot={class:"border rounded-lg overflow-hidden dark:border-gray-700"},lt={class:"p-6 bg-white dark:bg-gray-900"},st={class:"grid grid-cols-6 gap-6"},nt={class:"col-span-6 sm:col-span-3"},rt={class:"col-span-6 sm:col-span-3"},at={class:"col-span-6 sm:col-span-3"},dt={class:"col-span-6 sm:col-span-3"},ut={class:"border rounded-lg overflow-hidden dark:border-gray-700"},ct={class:"p-6 bg-white dark:bg-gray-900"},mt={class:"grid grid-cols-6 gap-6"},pt={class:"col-span-6 sm:col-span-3"},gt={key:0,class:"mt-2"},ft={class:"text-xs text-gray-600 dark:text-gray-400"},_t={class:"text-xs text-green-600 dark:text-green-400 mt-1"},vt={class:"col-span-6 sm:col-span-3"},yt={class:"col-span-6"},bt={class:"col-span-6"},xt={class:"col-span-6 sm:col-span-2"},wt={class:"col-span-6 sm:col-span-2"},kt={class:"col-span-6 sm:col-span-2"},ht={class:"border rounded-lg overflow-hidden dark:border-gray-700"},zt={class:"p-6 bg-white dark:bg-gray-900"},Vt={class:"grid grid-cols-6 gap-6"},Ct={class:"col-span-6 sm:col-span-3"},St=["value"],Pt={class:"col-span-6 sm:col-span-3"},Bt={class:"relative"},Et=["disabled"],Ot=["value"],$t=["value","disabled"],Tt={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},It={class:"col-span-6 sm:col-span-3"},Lt={class:"relative"},Dt=["disabled"],Nt=["value"],Ut=["value","disabled"],Mt={class:"col-span-6 sm:col-span-3"},jt={class:"relative"},At=["disabled"],qt=["value"],Ft=["value","disabled"],Rt={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},Ht={class:"col-span-6 sm:col-span-3"},Wt={class:"relative"},Kt=["disabled"],Gt=["value"],Yt=["value","disabled"],Jt={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},Qt={class:"col-span-6 sm:col-span-3"},Xt={class:"relative"},Zt=["disabled"],ei=["value"],ti=["value","disabled"],ii={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},oi={class:"col-span-6 sm:col-span-3"},li={class:"relative"},si=["disabled"],ni=["value"],ri=["value","disabled"],ai={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},di={class:"col-span-6 sm:col-span-3"},ui={class:"relative"},ci=["disabled"],mi=["value"],pi=["value","disabled"],gi={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},fi={class:"col-span-6 sm:col-span-3"},_i={class:"relative"},vi=["disabled"],yi=["value"],bi=["value","disabled"],xi={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},wi={key:0,class:"fixed z-50 inset-0 overflow-y-auto","aria-labelledby":"otp-modal-title",role:"dialog","aria-modal":"true"},ki={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},hi={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-6 pt-5 pb-6 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-md sm:w-full sm:p-8 relative"},zi=["disabled"],Vi={class:"sm:flex sm:items-start"},Ci={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Si={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100",id:"otp-modal-title"},Pi={class:"mt-4"},Bi={class:"text-sm text-gray-600 dark:text-gray-300"},Ei={class:"block font-medium text-gray-900 dark:text-white mt-1"},Oi={class:"mt-6"},$i={class:"flex justify-between space-x-3"},Ti=["onUpdate:modelValue","onInput","onKeydown","disabled"],Ii={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},Li={class:"mt-4 text-center"},Di={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},Ni={class:"font-medium"},Ui=["disabled"],Mi={class:"mt-6 sm:mt-8 sm:flex sm:flex-row-reverse"},ji=["disabled"],Ai={key:0},qi={key:1,class:"flex items-center"},Fi=["disabled"],eo={__name:"UpdateProfileInformationForm",props:{},setup(Ri){const{props:J}=$e(),B=te(()=>{var o;return((o=J==null?void 0:J.auth)==null?void 0:o.user)||null}),L=te(()=>{var o;return((o=B.value)==null?void 0:o.profile)||{}}),u=te(()=>{var o;return((o=B.value)==null?void 0:o.citizen)||{}}),t=he({_method:"PUT",profile:{surname:"",other_name:"",email:"",photo:null,date_of_birth:"",gender:"",ncpwd_number:"",ethnicity_id:"",religion_id:"",telephone:"",address_line_1:"",address_line_2:"",city:"",state:"",country:""},citizen:{national_identification_number:"",passport_number:"",driver_license_number:"",county_id:"",sub_county_id:"",constituency_id:"",ward_id:"",location_id:"",village_id:"",polling_center_id:"",polling_station_id:"",polling_stream_id:""}},{resetOnSuccess:!1,rules:{"citizen.national_identification_number":[(o,e)=>!o&&!e.citizen.passport_number?"Either National Identification Number or Passport Number is required":!0],"citizen.passport_number":[(o,e)=>!o&&!e.citizen.national_identification_number?"Either Passport Number or National Identification Number is required":!0]}}),D={ttl:300,rate_limit:60,attempts_limit:5},N=_(0),j=_(null);let Q=null;const A=_(!1),H=_(!1),C=he({otp:"",field_to_verify:"",verification_value:""}),ue=o=>{const r=Math.max(0,Math.floor((o-new Date)/1e3)),c=Math.floor(r/60),z=r%60;return{formatted:`${c}:${z.toString().padStart(2,"0")}`,isExpired:r<=0}},Se=o=>{let e=o.target.value.replace(/\D/g,"");e=e.substring(0,10),e.length>6?e=e.replace(/^(\d{3})(\d{3})(\d+)$/,"$1 $2 $3"):e.length>3&&(e=e.replace(/^(\d{3})(\d+)$/,"$1 $2")),t.telephone=e},X=()=>{Q&&(clearInterval(Q),Q=null)},ce=()=>{let o=!1,e=0,r=null;if(!j.value){const c=new Date;c.setSeconds(c.getSeconds()+D.ttl),j.value=c}X(),k.fire({title:"Verification Required",html:`
            <p class="mb-4">We've sent a 6-digit verification code to your ${C.field_to_verify==="email"?"email":"phone number"}: <strong>${C.new_value}</strong></p>
            <p class="mb-4 text-sm text-gray-600">
                This code will expire in 
                <span id="otp-timer" class="font-medium">${ue(j.value).formatted}</span>
            </p>
            <div class="flex flex-col items-center">
                <input id="swal-otp-input" class="swal2-input w-full text-center" placeholder="Enter 6-digit code" maxlength="6" type="text">
                <div class="text-sm text-gray-500 mt-2">
                    Didn't receive the code?
                    <button type="button" id="resend-otp-btn" class="text-green-600 hover:text-green-800">Resend</button>
                    <span id="resend-countdown" class="hidden ml-1 text-gray-500"></span>
                </div>
                <div class="text-xs text-gray-500 mt-1">
                    Attempts remaining: <span class="font-medium">${D.attempts_limit-N.value}</span> of ${D.attempts_limit}
                </div>
                ${N.value>0?`
                <div class="text-xs text-red-500 mt-1">
                    ${D.attempts_limit-N.value===0?"No attempts left. ":""}${N.value} failed attempt${N.value>1?"s":""}.
                </div>
                `:""}
            </div>
        `,showCancelButton:!0,confirmButtonText:"Verify",confirmButtonColor:"#10b981",cancelButtonText:"Cancel",allowOutsideClick:!1,preConfirm:()=>{const z=document.getElementById("swal-otp-input").value;return!z||z.length!==6?(k.showValidationMessage("Please enter the 6-digit verification code"),!1):z},didOpen:()=>{const c=document.getElementById("resend-otp-btn"),z=document.getElementById("resend-countdown"),S=document.getElementById("otp-timer");if(S){const m=()=>{const{formatted:v,isExpired:E}=ue(j.value);S.textContent=v,v.startsWith("0:")||E?(S.classList.add("text-red-500"),S.classList.remove("text-gray-600")):(S.classList.remove("text-red-500"),S.classList.add("text-gray-600")),E&&(S.textContent="expired",S.classList.add("font-bold"))};m(),Q=setInterval(m,1e3)}const h=()=>{o?(c.disabled=!0,c.classList.remove("text-green-600","hover:text-green-800"),c.classList.add("text-gray-400","cursor-not-allowed"),z.classList.remove("hidden"),z.textContent=`(${e}s)`):(c.disabled=!1,c.classList.add("text-green-600","hover:text-green-800"),c.classList.remove("text-gray-400","cursor-not-allowed"),z.classList.add("hidden"))};c.addEventListener("click",async()=>{var m,v,E;if(!o)try{await me(C.field_to_verify,C.new_value)}catch(l){if((E=(v=(m=l.response)==null?void 0:m.data)==null?void 0:v.message)!=null&&E.includes("wait")){const g=l.response.data.message.match(/wait (\d+) (?:seconds|second)/i);e=g&&g[1]?parseInt(g[1]):D.rate_limit,o=!0,h(),r=setInterval(()=>{e-=1,h(),e<=0&&(clearInterval(r),o=!1,h())},1e3)}}})},willClose:()=>{r&&clearInterval(r),X()}}).then(async c=>{c.isConfirmed&&await pe(c.value)})},me=async(o,e)=>{var r,c,z,S;try{if(!o||!e){Z("error","Validation Error",`${o==="email"?"Email":"Phone number"} is required for verification`);return}k.fire({title:"Sending OTP",text:`Please wait while we send an OTP to your ${o==="email"?"email":"phone number"}...`,allowOutsideClick:!1,didOpen:()=>{k.showLoading()}}),N.value=0,X();const h=new Date;h.setSeconds(h.getSeconds()+D.ttl),j.value=h;const m={};o==="email"?m.email=e:o==="telephone"&&(m.telephone=e);const v=await axios.post(route("auth.request-otp"),m);if(v.data.status==="success")C.verification_id=v.data.verification_id,C.field_to_verify=o,C.new_value=e,ce();else throw new Error(v.data.message||"Failed to send OTP. Please try again.")}catch(h){if(console.error("OTP send error:",h),(c=(r=h.response)==null?void 0:r.data)!=null&&c.message&&h.response.data.message.includes("wait")){let m=D.rate_limit;const v=h.response.data.message.match(/wait (\d+) (?:seconds|second)/i);v&&v[1]&&(m=parseInt(v[1]));const E=setInterval(()=>{m-=1;const l=document.getElementById("otp-timer");l&&(l.textContent=`${m}`),m<=0&&(clearInterval(E),k.close())},1e3);k.fire({icon:"warning",title:"Rate Limited",html:`
                    <p>You must wait before requesting another OTP.</p>
                    <div class="mt-4 text-center">
                        <p>Try again in <span id="otp-timer" class="font-bold text-lg">${m}</span> seconds</p>
                    </div>
                `,showConfirmButton:!0,confirmButtonText:"OK",confirmButtonColor:"#10b981",willClose:()=>{clearInterval(E)}})}else k.fire({icon:"error",title:"OTP Error",text:((S=(z=h.response)==null?void 0:z.data)==null?void 0:S.message)||"Failed to send OTP. Please try again."})}},pe=async o=>{var e,r,c,z,S,h;if(j.value&&new Date>j.value){k.fire({icon:"error",title:"OTP Expired",text:"The verification code has expired. Please request a new one.",confirmButtonColor:"#10b981"});return}if(N.value>=D.attempts_limit){k.fire({icon:"error",title:"Maximum Attempts Reached",text:"You've exceeded the maximum number of verification attempts. Please request a new OTP.",confirmButtonColor:"#10b981"});return}N.value+=1;try{k.fire({title:"Verifying OTP",text:"Please wait while we verify your OTP...",allowOutsideClick:!1,didOpen:()=>{k.showLoading()}});const m={otp:o};C.field_to_verify==="email"?m.email=C.new_value:C.field_to_verify==="telephone"&&(m.telephone=C.new_value);const v=await axios.post(route("auth.verify-otp"),m);if(v.data.status==="success")N.value=0,C.field_to_verify==="email"?(t.email=C.new_value,t.email_verified_at=new Date().toISOString(),t.clearErrors("email")):C.field_to_verify==="telephone"&&(t.telephone=C.new_value,t.telephone_verified_at=new Date().toISOString(),t.clearErrors("telephone")),H.value=!1,C.reset(),X(),k.fire({icon:"success",title:"Verification Successful",text:`Your ${C.field_to_verify==="email"?"email address":"telephone number"} has been verified successfully.`,confirmButtonColor:"#10b981"}),(e=v.data.data)!=null&&e.accessToken&&(window.localStorage.setItem("auth_token",v.data.data.accessToken),axios.defaults.headers.common.Authorization=`Bearer ${v.data.data.accessToken}`,await Ve.reload({only:["user"]})),q.value&&(q.value=!1,await fe());else throw new Error(v.data.message||"Invalid OTP. Please try again.")}catch(m){console.error("OTP verification error:",m),k.fire({icon:"error",title:"Verification Failed",html:`
                <p>${((c=(r=m.response)==null?void 0:r.data)==null?void 0:c.message)||"Failed to verify OTP. Please try again."}</p>
                ${(h=(S=(z=m.response)==null?void 0:z.data)==null?void 0:S.message)!=null&&h.includes("attempts exceeded")?`<p class="mt-2 text-sm">You have exceeded the maximum of ${D.attempts_limit} attempts. Please request a new OTP.</p>`:""}
            `,confirmButtonColor:"#10b981"}).then(()=>{N.value<D.attempts_limit&&ce()})}},q=_(!1),Z=(o,e,r)=>{k.fire({toast:!0,position:"top-end",icon:o,title:e,text:r,showConfirmButton:!1,timer:3e3,timerProgressBar:!0})};w(L,o=>{o&&Object.keys(o).forEach(e=>{e in t.profile&&(t.profile[e]=o[e])})},{immediate:!0,deep:!0}),w(u,o=>{o&&Object.keys(o).length>0&&Object.keys(o).forEach(e=>{e in t.citizen&&(t.citizen[e]=o[e])})},{immediate:!0,deep:!0}),w(L,o=>{if(o){t.profile.surname=o.last_name||null,t.profile.other_name=(o.first_name||"")+(o.middle_name?` ${o.middle_name}`:""),t.profile.email=o.email||B.value.email;const e=o.date_of_birth||null;if(e){const r=new Date(e);t.profile.date_of_birth=isNaN(r.getTime())?"":r.toISOString().split("T")[0]}else t.profile.date_of_birth="";t.profile.gender=o.gender||null,t.profile.ncpwd_number=o.ncpwd_number||null,t.profile.ethnicity_id=o.ethnicity_id||null,t.profile.religion_id=o.religion_id||null,t.profile.telephone=o.telephone||null,t.profile.address_line_1=o.address_line_1||null,t.profile.address_line_2=o.address_line_2||null,t.profile.city=o.city||null,t.profile.state=o.state||null,t.profile.country=o.country||null}},{immediate:!0,deep:!0}),w(u,o=>{o&&Object.keys(o).length>0&&(console.log("Updating citizen form data:",o),t.citizen.national_identification_number=o.national_identification_number||null,t.citizen.passport_number=o.passport_number||null,t.citizen.driver_license_number=o.driver_license_number||null,t.citizen.county_id=o.county_id||null,t.citizen.sub_county_id=o.sub_county_id||null,t.citizen.constituency_id=o.constituency_id||null,t.citizen.ward_id=o.ward_id||null,t.citizen.location_id=o.location_id||null,t.citizen.village_id=o.village_id||null,t.citizen.polling_center_id=o.polling_center_id||null,t.citizen.polling_station_id=o.polling_station_id||null,t.citizen.polling_stream_id=o.polling_stream_id||null,console.log("Updated form.citizen:",t.citizen))},{immediate:!0,deep:!0});const ge=_(null),W=_(null),K=_(null),fe=async(o=!1)=>{var c,z,S,h;const e=(B==null?void 0:B.email)&&t.profile.email!==B.email,r=(L==null?void 0:L.telephone)&&t.profile.telephone!==L.telephone;if(!o&&(q.value||e||r)){q.value=!0;let m="",v="",E="";if(r?(m="telephone",L!=null&&L.telephone?(v=L.telephone,E=`We'll send a verification code to your current number <strong>${L.telephone}</strong> to confirm this change.`):q.value=!1):e&&(B!=null&&B.email)&&(m="email",v=B.email,E=`We'll send a verification code to <strong>${B.email}</strong> to confirm your email address change.`),m)try{const l=await k.fire({title:"Verify "+(m==="email"?"Email Address":"Phone Number"),html:E,icon:"info",showCancelButton:!0,confirmButtonText:"Send Verification Code",cancelButtonText:"Cancel",reverseButtons:!0,customClass:{confirmButton:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",cancelButton:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300"},buttonsStyling:!1});l.isConfirmed?await me(m,v):l.isDismissed&&(q.value=!1);return}catch(l){console.error("Error in verification flow:",l),Z("error","Verification Error","An error occurred while setting up verification. Please try again."),q.value=!1;return}}try{t.transform(m=>({...m,_method:"PUT"})).post(route("user-profile-information.update"),{onSuccess:()=>{G(),Z("success","Success","Profile updated successfully!"),window.location.reload()},onError:m=>{console.error("Error updating profile:",m),Z("error","Error","Failed to update profile. Please check the form for errors.")},preserveScroll:!0,forceFormData:!0});return}catch(m){console.error("Error updating profile:",m);const v=((z=(c=m.response)==null?void 0:c.data)==null?void 0:z.message)||"Failed to update profile. Please try again.",E=(h=(S=m.response)==null?void 0:S.data)!=null&&h.errors?Object.values(m.response.data.errors).flat()[0]:v;k.fire({toast:!0,position:"top-end",icon:"error",title:E,showConfirmButton:!1,timer:5e3,timerProgressBar:!0,didOpen:l=>{l.addEventListener("mouseenter",k.stopTimer),l.addEventListener("mouseleave",k.resumeTimer)}})}},Pe=()=>{ge.value=!0},Be=()=>{K.value.click()},Ee=()=>{const o=K.value.files[0];if(!o)return;if(!o.type.match("image.*")){k.fire({icon:"error",title:"Invalid File Type",text:"Please select an image file (JPEG, PNG, GIF, etc.)",confirmButtonColor:"#10b981"}),G();return}const e=5*1024*1024;if(o.size>e){k.fire({icon:"error",title:"File Too Large",text:"Maximum file size is 5MB. Please choose a smaller file.",confirmButtonColor:"#10b981"}),G();return}const r=new FileReader;r.onload=c=>{W.value=c.target.result,t.profile&&(t.profile.photo=o)},r.readAsDataURL(o)},Oe=()=>{Ve.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{W.value=null,G()}})},G=()=>{var o;(o=K.value)!=null&&o.value&&(K.value.value=null)},U=_("personal");_([]),_([]),_([]),_([]),_([]),_([]),_([]);const _e=_(!1);_(!1);const ve=_(!1),ye=_(!1),be=_(!1),xe=_(!1),we=_(!1),ke=_(!1),M=te(()=>{var e;return((e=J.formData)==null?void 0:e.locations)||{counties:[],sub_counties:[],constituencies:[],wards:[],locations:[],villages:[],polling_centers:[],polling_stations:[],polling_streams:[]}}),ie=_([]),oe=_([]),le=_([]),se=_([]),ne=_([]),re=_([]),ae=_([]),de=_([]);w(()=>t.citizen.county_id,o=>{var e,r;if(!o){ie.value=[],oe.value=[],t.citizen.sub_county_id="",t.citizen.constituency_id="";return}ie.value=((e=M.value.sub_counties)==null?void 0:e.filter(c=>c.county_id==o))||[],oe.value=((r=M.value.constituencies)==null?void 0:r.filter(c=>c.county_id==o))||[],t.citizen.sub_county_id="",t.citizen.constituency_id=""}),w(()=>t.citizen.constituency_id,o=>{var e;if(!o){le.value=[],t.citizen.ward_id="";return}le.value=((e=M.value.wards)==null?void 0:e.filter(r=>r.constituency_id==o))||[],t.citizen.ward_id=""}),w(()=>t.citizen.ward_id,o=>{var e,r;if(!o){se.value=[],re.value=[],t.citizen.location_id="",t.citizen.polling_center_id="";return}se.value=((e=M.value.locations)==null?void 0:e.filter(c=>c.ward_id==o))||[],re.value=((r=M.value.polling_centers)==null?void 0:r.filter(c=>c.ward_id==o))||[],t.citizen.location_id="",t.citizen.polling_center_id=""}),w(()=>t.citizen.location_id,o=>{var e;if(!o){ne.value=[],t.citizen.village_id="";return}ne.value=((e=M.value.villages)==null?void 0:e.filter(r=>r.location_id==o))||[],t.citizen.village_id=""}),w(()=>t.citizen.polling_center_id,o=>{var e;if(!o){ae.value=[],t.citizen.polling_station_id="";return}ae.value=((e=M.value.polling_stations)==null?void 0:e.filter(r=>r.center_id==o))||[],t.citizen.polling_station_id=""}),w(()=>t.citizen.polling_station_id,o=>{var e;if(!o){de.value=[],t.citizen.polling_stream_id="";return}de.value=((e=M.value.polling_streams)==null?void 0:e.filter(r=>r.station_id==o))||[],t.citizen.polling_stream_id=""}),w(()=>t.citizen.county_id,()=>{t.citizen.sub_county_id="",t.citizen.constituency_id="",t.citizen.ward_id="",t.citizen.location_id="",t.citizen.village_id="",t.citizen.polling_center_id="",t.citizen.polling_station_id="",t.citizen.polling_stream_id=""}),w(()=>t.citizen.constituency_id,()=>{t.citizen.ward_id="",t.citizen.location_id="",t.citizen.village_id="",t.citizen.polling_center_id="",t.citizen.polling_station_id="",t.citizen.polling_stream_id=""}),w(()=>t.citizen.ward_id,()=>{t.citizen.location_id="",t.citizen.village_id="",t.citizen.polling_center_id="",t.citizen.polling_station_id="",t.citizen.polling_stream_id=""}),w(()=>t.citizen.location_id,()=>{t.citizen.village_id=""}),w(()=>t.citizen.polling_center_id,()=>{t.citizen.polling_station_id="",t.citizen.polling_stream_id=""}),w(()=>t.citizen.polling_station_id,()=>{t.citizen.polling_stream_id=""}),w(()=>t.citizen.county_id,o=>{t.citizen.sub_county_id="",t.citizen.constituency_id="",t.citizen.ward_id="",t.citizen.location_id="",t.citizen.village_id="",t.citizen.polling_center_id="",t.citizen.polling_station_id="",t.polling_stream_id=""}),w(()=>t.citizen.sub_county_id,o=>{o&&(t.citizen.ward_id="",t.citizen.location_id="",t.citizen.village_id="",t.citizen.polling_center_id="",t.citizen.polling_station_id="",t.citizen.polling_stream_id="")}),w(()=>t.citizen.constituency_id,o=>{t.citizen.ward_id="",t.citizen.location_id="",t.citizen.village_id="",t.citizen.polling_center_id="",t.citizen.polling_station_id="",t.citizen.polling_stream_id=""}),w(()=>t.citizen.ward_id,o=>{t.citizen.location_id="",t.citizen.village_id="",t.citizen.polling_center_id="",t.citizen.polling_station_id="",t.citizen.polling_stream_id=""}),w(()=>t.citizen.location_id,o=>{o&&(t.citizen.village_id="")}),w(()=>t.citizen.polling_center_id,o=>{t.citizen.polling_station_id="",t.citizen.polling_stream_id=""}),w(()=>t.citizen.polling_station_id,o=>{o&&(t.citizen.polling_stream_id="")});const ee=o=>{U.value=U.value===o?null:o};return(o,e)=>(a(),d(O,null,[n(Ue,{onSubmitted:fe},{title:f(()=>e[36]||(e[36]=[p(" Profile Information ")])),description:f(()=>e[37]||(e[37]=[p(" Update your personal, contact, and identification information. Ensure all details are accurate and up-to-date. ")])),form:f(()=>{var r,c,z,S,h,m,v,E;return[o.$page.props.jetstream.managesProfilePhotos?(a(),d("div",je,[i("input",{id:"photo",ref_key:"photoInput",ref:K,type:"file",class:"hidden",onChange:Ee},null,544),n(b,{for:"photo",value:"Profile Image"}),V(i("div",Ae,[i("img",{src:B.value.profile_photo_path,alt:B.value.name,class:"rounded-full size-20 object-cover"},null,8,qe)],512),[[R,!W.value]]),V(i("div",Fe,[i("span",{class:"block rounded-full size-20 bg-cover bg-no-repeat bg-center",style:Ie("background-image: url('"+W.value+"');")},null,4)],512),[[R,W.value]]),n(Ce,{class:"mt-2 me-2",type:"button",onClick:Y(Be,["prevent"])},{default:f(()=>e[38]||(e[38]=[p(" Select A New Photo ")])),_:1,__:[38]}),B.value.profile_photo_path?(a(),Te(Ce,{key:0,type:"button",class:"mt-2",onClick:Y(Oe,["prevent"])},{default:f(()=>e[39]||(e[39]=[p(" Remove Photo ")])),_:1,__:[39]})):P("",!0),n(y,{message:s(t).errors.photo,class:"mt-2"},null,8,["message"])])):P("",!0),i("div",Re,[i("div",He,[i("button",{type:"button",onClick:e[0]||(e[0]=l=>ee("personal")),class:"w-full px-6 py-4 text-left font-medium text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 flex justify-between items-center"},[e[41]||(e[41]=i("span",null,"Personal Information",-1)),(a(),d("svg",{class:F(["w-5 h-5 transition-transform duration-200",{"rotate-180":U.value==="personal"}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e[40]||(e[40]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),V(i("div",We,[i("div",Ke,[i("div",Ge,[n(b,{for:"surname"},{default:f(()=>e[42]||(e[42]=[p(" Surname "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[42]}),n(T,{id:"surname",modelValue:s(t).profile.surname,"onUpdate:modelValue":e[1]||(e[1]=l=>s(t).profile.surname=l),type:"text",class:"mt-1 block w-full",placeholder:"Enter your surname",required:"",autocomplete:"family-name"},null,8,["modelValue"]),n(y,{message:s(t).errors.surname,class:"mt-2"},null,8,["message"])]),i("div",Ye,[n(b,{for:"other_name"},{default:f(()=>e[43]||(e[43]=[p(" Other Name "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[43]}),n(T,{id:"other_name",modelValue:s(t).profile.other_name,"onUpdate:modelValue":e[2]||(e[2]=l=>s(t).profile.other_name=l),type:"text",class:"mt-1 block w-full",placeholder:"Enter your other names",required:"",autocomplete:"given-name"},null,8,["modelValue"]),n(y,{message:s(t).errors["profile.other_name"],class:"mt-2"},null,8,["message"])]),i("div",Je,[n(b,{for:"date_of_birth"},{default:f(()=>e[44]||(e[44]=[p(" Date of Birth "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[44]}),n(T,{id:"date_of_birth",modelValue:s(t).profile.date_of_birth,"onUpdate:modelValue":e[3]||(e[3]=l=>s(t).profile.date_of_birth=l),type:"date",class:"mt-1 block w-full",max:new Date().toISOString().split("T")[0],required:""},null,8,["modelValue","max"]),n(y,{message:s(t).errors["profile.date_of_birth"],class:"mt-2"},null,8,["message"])]),i("div",Qe,[n(b,{for:"gender"},{default:f(()=>e[45]||(e[45]=[p(" Gender "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[45]}),V(i("select",{id:"gender","onUpdate:modelValue":e[4]||(e[4]=l=>s(t).profile.gender=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",required:""},[e[46]||(e[46]=i("option",{value:""},"Select Gender",-1)),(a(!0),d(O,null,$(o.$page.props.formData.genders,l=>{var g;return a(),d("option",{key:l.id,value:l.id,selected:((g=B.value.profile)==null?void 0:g.gender)===l.id},x(l.name),9,Xe)}),128))],512),[[I,s(t).profile.gender]]),n(y,{message:s(t).errors.gender,class:"mt-2"},null,8,["message"])]),i("div",Ze,[n(b,{for:"ethnicity_id"},{default:f(()=>e[47]||(e[47]=[p(" Ethnicity "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[47]}),V(i("select",{id:"ethnicity_id","onUpdate:modelValue":e[5]||(e[5]=l=>s(t).profile.ethnicity_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",required:""},[e[48]||(e[48]=i("option",{value:""},"Select Ethnicity",-1)),(a(!0),d(O,null,$(o.$page.props.formData.ethnicities,l=>{var g;return a(),d("option",{key:l.id,value:l.id,selected:((g=B.value.profile)==null?void 0:g.ethnicity_id)===l.id},x(l.name),9,et)}),128))],512),[[I,s(t).profile.ethnicity_id]]),n(y,{message:s(t).errors.ethnicity_id,class:"mt-2"},null,8,["message"])]),i("div",tt,[n(b,{for:"religion_id"},{default:f(()=>e[49]||(e[49]=[p(" Religion "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[49]}),V(i("select",{id:"religion_id","onUpdate:modelValue":e[6]||(e[6]=l=>s(t).profile.religion_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",required:""},[e[50]||(e[50]=i("option",{value:""},"Select Religion",-1)),(a(!0),d(O,null,$(o.$page.props.formData.religions,l=>{var g;return a(),d("option",{key:l.id,value:l.id,selected:((g=B.value.profile)==null?void 0:g.religion_id)===l.id},x(l.name),9,it)}),128))],512),[[I,s(t).profile.religion_id]]),n(y,{message:s(t).errors.religion_id,class:"mt-2"},null,8,["message"])])])],512),[[R,U.value==="personal"]])]),i("div",ot,[i("button",{type:"button",onClick:e[7]||(e[7]=l=>ee("identification")),class:"w-full px-6 py-4 text-left font-medium text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 flex justify-between items-center"},[e[52]||(e[52]=i("span",null,"Identification Information",-1)),(a(),d("svg",{class:F(["w-5 h-5 transition-transform duration-200",{"rotate-180":U.value==="identification"}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e[51]||(e[51]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),V(i("div",lt,[i("div",st,[i("div",nt,[n(b,{for:"national_identification_number"},{default:f(()=>e[53]||(e[53]=[p(" National Identification Number "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1),i("span",{class:"text-xs text-gray-500 font-normal"},"(or Passport Number)",-1)])),_:1,__:[53]}),n(T,{id:"national_identification_number",modelValue:s(t).citizen.national_identification_number,"onUpdate:modelValue":e[8]||(e[8]=l=>s(t).citizen.national_identification_number=l),type:"text",class:"mt-1 block w-full",placeholder:"e.g., 12345678",required:!s(t).citizen.passport_number,autocomplete:"off"},null,8,["modelValue","required"]),n(y,{message:s(t).errors["citizen.national_identification_number"],class:"mt-2"},null,8,["message"])]),i("div",rt,[n(b,{for:"passport_number"},{default:f(()=>e[54]||(e[54]=[p(" Passport Number "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1),i("span",{class:"text-xs text-gray-500 font-normal"},"(or National Identification Number)",-1)])),_:1,__:[54]}),n(T,{id:"passport_number",modelValue:s(t).citizen.passport_number,"onUpdate:modelValue":e[9]||(e[9]=l=>s(t).citizen.passport_number=l),type:"text",class:"mt-1 block w-full",placeholder:"e.g., A1234567",required:!s(t).citizen.national_identification_number,autocomplete:"off"},null,8,["modelValue","required"]),n(y,{message:s(t).errors["citizen.passport_number"],class:"mt-2"},null,8,["message"])]),i("div",at,[n(b,{for:"driver_license_number"},{default:f(()=>e[55]||(e[55]=[p(" Driver's License Number "),i("span",{class:"text-xs text-gray-500 font-normal"},"(Optional)",-1)])),_:1,__:[55]}),n(T,{id:"driver_license_number",modelValue:s(t).citizen.driver_license_number,"onUpdate:modelValue":e[10]||(e[10]=l=>s(t).citizen.driver_license_number=l),type:"text",class:"mt-1 block w-full",placeholder:"e.g., DL12345678"},null,8,["modelValue"]),n(y,{message:s(t).errors["citizen.driver_license_number"],class:"mt-2"},null,8,["message"])]),i("div",dt,[n(b,{for:"ncpwd_number"},{default:f(()=>e[56]||(e[56]=[p(" NCPWD Number "),i("span",{class:"text-xs text-gray-500 font-normal"},"(if Applicable)",-1)])),_:1,__:[56]}),n(T,{id:"ncpwd_number",modelValue:s(t).profile.ncpwd_number,"onUpdate:modelValue":e[11]||(e[11]=l=>s(t).profile.ncpwd_number=l),type:"text",class:"mt-1 block w-full",placeholder:"e.g., NCPWD/1234/5678"},null,8,["modelValue"]),n(y,{message:s(t).errors.ncpwd_number,class:"mt-2"},null,8,["message"])])])],512),[[R,U.value==="identification"]])]),i("div",ut,[i("button",{type:"button",onClick:e[12]||(e[12]=l=>ee("contact")),class:"w-full px-6 py-4 text-left font-medium text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 flex justify-between items-center"},[e[58]||(e[58]=i("span",null,"Contact Information",-1)),(a(),d("svg",{class:F(["w-5 h-5 transition-transform duration-200",{"rotate-180":U.value==="contact"}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e[57]||(e[57]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),V(i("div",ct,[i("div",mt,[i("div",pt,[n(b,{for:"email"},{default:f(()=>e[59]||(e[59]=[p(" Email Address "),i("span",{class:"text-xs text-gray-500 font-normal"},"(Optional)",-1)])),_:1,__:[59]}),n(T,{id:"email",modelValue:s(t).profile.email,"onUpdate:modelValue":e[13]||(e[13]=l=>s(t).profile.email=l),type:"email",class:"mt-1 block w-full",placeholder:"your.email@example.com",autocomplete:"email"},null,8,["modelValue"]),n(y,{message:s(t).errors["profile.email"],class:"mt-2"},null,8,["message"]),o.$page.props.jetstream.hasEmailVerification&&B.value.email_verified_at===null?(a(),d("div",gt,[i("p",ft,[e[61]||(e[61]=p(" Your email is unverified. ")),n(s(Le),{href:o.route("verification.send"),method:"post",as:"button",class:"underline text-xs hover:text-gray-900 dark:hover:text-gray-200",onClick:Y(Pe,["prevent"])},{default:f(()=>e[60]||(e[60]=[p(" Resend verification ")])),_:1,__:[60]},8,["href","onClick"])]),V(i("div",_t," Verification link sent! ",512),[[R,ge.value]])])):P("",!0)]),i("div",vt,[n(b,{for:"telephone"},{default:f(()=>e[62]||(e[62]=[p(" Telephone Number "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[62]}),V(i("input",{id:"telephone",name:"telephone","onUpdate:modelValue":e[14]||(e[14]=l=>s(t).profile.telephone=l),type:"tel",class:"border-gray-300 focus:border-green-500 focus:ring-green-500 rounded-md shadow-sm mt-1 block w-full",placeholder:"e.g., 0712345678",required:"",onInput:Se},null,544),[[ze,s(t).profile.telephone]]),n(y,{message:s(t).errors["profile.telephone"],class:"mt-2"},null,8,["message"])]),i("div",yt,[n(b,{for:"address_line_1"},{default:f(()=>e[63]||(e[63]=[p(" Address Line 1 "),i("span",{class:"text-xs text-gray-500 font-normal"},"(Optional)",-1)])),_:1,__:[63]}),n(T,{id:"address_line_1",modelValue:s(t).profile.address_line_1,"onUpdate:modelValue":e[15]||(e[15]=l=>s(t).profile.address_line_1=l),type:"text",class:"mt-1 block w-full",placeholder:"e.g., 123 Main Street"},null,8,["modelValue"]),n(y,{message:s(t).errors["profile.address_line_1"],class:"mt-2"},null,8,["message"])]),i("div",bt,[n(b,{for:"address_line_2"},{default:f(()=>e[64]||(e[64]=[p(" Address Line 2 "),i("span",{class:"text-xs text-gray-500 font-normal"},"(Optional)",-1)])),_:1,__:[64]}),n(T,{id:"address_line_2",modelValue:s(t).profile.address_line_2,"onUpdate:modelValue":e[16]||(e[16]=l=>s(t).profile.address_line_2=l),type:"text",class:"mt-1 block w-full",placeholder:"e.g., Apartment, suite, etc. (optional)"},null,8,["modelValue"]),n(y,{message:s(t).errors["profile.address_line_2"],class:"mt-2"},null,8,["message"])]),i("div",xt,[n(b,{for:"city"},{default:f(()=>e[65]||(e[65]=[p(" City "),i("span",{class:"text-xs text-gray-500 font-normal"},"(Optional)",-1)])),_:1,__:[65]}),n(T,{id:"city",modelValue:s(t).profile.city,"onUpdate:modelValue":e[17]||(e[17]=l=>s(t).profile.city=l),type:"text",class:"mt-1 block w-full",placeholder:"e.g., Nairobi"},null,8,["modelValue"]),n(y,{message:s(t).errors["profile.city"],class:"mt-2"},null,8,["message"])]),i("div",wt,[n(b,{for:"state"},{default:f(()=>e[66]||(e[66]=[p(" State/Province "),i("span",{class:"text-xs text-gray-500 font-normal"},"(Optional)",-1)])),_:1,__:[66]}),n(T,{id:"state",modelValue:s(t).profile.state,"onUpdate:modelValue":e[18]||(e[18]=l=>s(t).profile.state=l),type:"text",class:"mt-1 block w-full",placeholder:"e.g., Nairobi"},null,8,["modelValue"]),n(y,{message:s(t).errors["profile.state"],class:"mt-2"},null,8,["message"])]),i("div",kt,[n(b,{for:"country"},{default:f(()=>e[67]||(e[67]=[p(" Country "),i("span",{class:"text-xs text-gray-500 font-normal"},"(Optional)",-1)])),_:1,__:[67]}),n(T,{id:"country",modelValue:s(t).profile.country,"onUpdate:modelValue":e[19]||(e[19]=l=>s(t).profile.country=l),type:"text",class:"mt-1 block w-full bg-gray-100 dark:bg-gray-800 cursor-not-allowed",placeholder:"e.g., Kenya",readonly:""},null,8,["modelValue"]),n(y,{message:s(t).errors["profile.country"],class:"mt-2"},null,8,["message"])])])],512),[[R,U.value==="contact"]])]),i("div",ht,[i("button",{type:"button",onClick:e[20]||(e[20]=l=>ee("location")),class:"w-full px-6 py-4 text-left font-medium text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 flex justify-between items-center"},[e[69]||(e[69]=i("span",null,"Location Information",-1)),(a(),d("svg",{class:F(["w-5 h-5 transition-transform duration-200",{"rotate-180":U.value==="location"}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e[68]||(e[68]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),V(i("div",zt,[i("div",Vt,[i("div",Ct,[n(b,{for:"county_id"},{default:f(()=>e[70]||(e[70]=[p(" County "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[70]}),V(i("select",{id:"county_id","onUpdate:modelValue":e[21]||(e[21]=l=>s(t).citizen.county_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",required:""},[e[71]||(e[71]=i("option",{value:""},"Select County",-1)),(a(!0),d(O,null,$(o.$page.props.formData.locations.counties,l=>(a(),d("option",{key:l.id,value:l.id},x(l.name),9,St))),128))],512),[[I,s(t).citizen.county_id]]),n(y,{message:s(t).errors["citizen.county_id"],class:"mt-2"},null,8,["message"])]),i("div",Pt,[n(b,{for:"sub_county_id"},{default:f(()=>e[72]||(e[72]=[p(" Sub County "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[72]}),i("div",Bt,[V(i("select",{id:"sub_county_id","onUpdate:modelValue":e[22]||(e[22]=l=>s(t).citizen.sub_county_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",disabled:!s(t).citizen.county_id||_e.value},[e[73]||(e[73]=i("option",{value:""},"Select Sub County",-1)),(r=u.value)!=null&&r.sub_county&&u.value.sub_county.county_id==s(t).citizen.county_id?(a(),d("option",{value:u.value.sub_county_id,key:"current-subcounty-"+u.value.sub_county_id},x(u.value.sub_county.name),9,Ot)):P("",!0),(a(!0),d(O,null,$(ie.value,l=>{var g;return a(),d("option",{key:l.id,value:l.id,disabled:((g=u.value)==null?void 0:g.sub_county_id)===l.id},x(l.name),9,$t)}),128))],8,Et),[[I,s(t).citizen.sub_county_id]]),_e.value?(a(),d("div",Tt,e[74]||(e[74]=[i("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):P("",!0)]),n(y,{message:s(t).errors["citizen.sub_county_id"],class:"mt-2"},null,8,["message"])]),i("div",It,[n(b,{for:"constituency_id"},{default:f(()=>e[75]||(e[75]=[p(" Constituency "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[75]}),i("div",Lt,[V(i("select",{id:"constituency_id","onUpdate:modelValue":e[23]||(e[23]=l=>s(t).citizen.constituency_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",disabled:!s(t).citizen.county_id,required:""},[e[76]||(e[76]=i("option",{value:""},"Select Constituency",-1)),(c=u.value)!=null&&c.constituency&&u.value.constituency.county_id==s(t).citizen.county_id?(a(),d("option",{value:u.value.constituency_id,key:"current-constituency-"+u.value.constituency_id},x(u.value.constituency.name),9,Nt)):P("",!0),(a(!0),d(O,null,$(oe.value,l=>{var g;return a(),d("option",{key:l.id,value:l.id,disabled:((g=u.value)==null?void 0:g.constituency_id)===l.id},x(l.name),9,Ut)}),128))],8,Dt),[[I,s(t).citizen.constituency_id]])]),n(y,{message:s(t).errors["citizen.constituency_id"],class:"mt-2"},null,8,["message"])]),i("div",Mt,[n(b,{for:"ward_id"},{default:f(()=>e[77]||(e[77]=[p(" Ward "),i("i",{class:"fas fa-star text-red-500 text-xs ml-1"},null,-1)])),_:1,__:[77]}),i("div",jt,[V(i("select",{id:"ward_id","onUpdate:modelValue":e[24]||(e[24]=l=>s(t).citizen.ward_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",disabled:!s(t).citizen.constituency_id||ve.value,required:""},[e[78]||(e[78]=i("option",{value:""},"Select Ward",-1)),(z=u.value)!=null&&z.ward&&u.value.ward.constituency_id==s(t).citizen.constituency_id?(a(),d("option",{value:u.value.ward_id,key:"current-ward-"+u.value.ward_id},x(u.value.ward.name),9,qt)):P("",!0),(a(!0),d(O,null,$(le.value,l=>{var g;return a(),d("option",{key:l.id,value:l.id,disabled:((g=u.value)==null?void 0:g.ward_id)===l.id},x(l.name),9,Ft)}),128))],8,At),[[I,s(t).citizen.ward_id]]),ve.value?(a(),d("div",Rt,e[79]||(e[79]=[i("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):P("",!0)]),n(y,{message:s(t).errors["citizen.ward_id"],class:"mt-2"},null,8,["message"])]),i("div",Ht,[n(b,{for:"location_id"},{default:f(()=>e[80]||(e[80]=[p(" Location ")])),_:1,__:[80]}),i("div",Wt,[V(i("select",{id:"location_id","onUpdate:modelValue":e[25]||(e[25]=l=>s(t).citizen.location_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",disabled:!s(t).citizen.ward_id||ye.value},[e[81]||(e[81]=i("option",{value:""},"Select Location",-1)),(S=u.value)!=null&&S.location&&u.value.location.ward_id==s(t).citizen.ward_id?(a(),d("option",{value:u.value.location_id,key:"current-location-"+u.value.location_id},x(u.value.location.name),9,Gt)):P("",!0),(a(!0),d(O,null,$(se.value,l=>{var g;return a(),d("option",{key:l.id,value:l.id,disabled:((g=u.value)==null?void 0:g.location_id)===l.id},x(l.name),9,Yt)}),128))],8,Kt),[[I,s(t).citizen.location_id]]),ye.value?(a(),d("div",Jt,e[82]||(e[82]=[i("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):P("",!0)]),n(y,{message:s(t).errors["citizen.location_id"],class:"mt-2"},null,8,["message"])]),i("div",Qt,[n(b,{for:"village_id"},{default:f(()=>e[83]||(e[83]=[p(" Village ")])),_:1,__:[83]}),i("div",Xt,[V(i("select",{id:"village_id","onUpdate:modelValue":e[26]||(e[26]=l=>s(t).citizen.village_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",disabled:!s(t).citizen.location_id||be.value},[e[84]||(e[84]=i("option",{value:""},"Select Village",-1)),(h=u.value)!=null&&h.village&&u.value.village.location_id==s(t).citizen.location_id?(a(),d("option",{value:u.value.village_id,key:"current-village-"+u.value.village_id},x(u.value.village.name),9,ei)):P("",!0),(a(!0),d(O,null,$(ne.value,l=>{var g;return a(),d("option",{key:l.id,value:l.id,disabled:((g=u.value)==null?void 0:g.village_id)===l.id},x(l.name),9,ti)}),128))],8,Zt),[[I,s(t).citizen.village_id]]),be.value?(a(),d("div",ii,e[85]||(e[85]=[i("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):P("",!0)]),n(y,{message:s(t).errors["citizen.village_id"],class:"mt-2"},null,8,["message"])]),i("div",oi,[n(b,{for:"polling_center_id"},{default:f(()=>e[86]||(e[86]=[p(" Polling Center ")])),_:1,__:[86]}),i("div",li,[V(i("select",{id:"polling_center_id","onUpdate:modelValue":e[27]||(e[27]=l=>s(t).citizen.polling_center_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",disabled:!s(t).citizen.ward_id||xe.value},[e[87]||(e[87]=i("option",{value:""}," Select Polling Center ",-1)),(m=u.value)!=null&&m.polling_center&&u.value.polling_center.ward_id==s(t).citizen.ward_id?(a(),d("option",{value:u.value.polling_center_id,key:"current-center-"+u.value.polling_center_id},x(u.value.polling_center.name),9,ni)):P("",!0),(a(!0),d(O,null,$(re.value,l=>{var g;return a(),d("option",{key:l.id,value:l.id,disabled:((g=u.value)==null?void 0:g.polling_center_id)===l.id},x(l.name),9,ri)}),128))],8,si),[[I,s(t).citizen.polling_center_id]]),xe.value?(a(),d("div",ai,e[88]||(e[88]=[i("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):P("",!0)]),n(y,{message:s(t).errors["citizen.polling_center_id"],class:"mt-2"},null,8,["message"])]),i("div",di,[n(b,{for:"polling_station_id"},{default:f(()=>e[89]||(e[89]=[p(" Polling Station ")])),_:1,__:[89]}),i("div",ui,[V(i("select",{id:"polling_station_id","onUpdate:modelValue":e[28]||(e[28]=l=>s(t).citizen.polling_station_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",disabled:!s(t).citizen.polling_center_id||we.value},[e[90]||(e[90]=i("option",{value:""}," Select Polling Station ",-1)),(v=u.value)!=null&&v.polling_station&&u.value.polling_station.polling_center_id==s(t).citizen.polling_center_id?(a(),d("option",{value:u.value.polling_station_id,key:"current-station-"+u.value.polling_station_id},x(u.value.polling_station.name),9,mi)):P("",!0),(a(!0),d(O,null,$(ae.value,l=>{var g;return a(),d("option",{key:l.id,value:l.id,disabled:((g=u.value)==null?void 0:g.polling_station_id)===l.id},x(l.name),9,pi)}),128))],8,ci),[[I,s(t).citizen.polling_station_id]]),we.value?(a(),d("div",gi,e[91]||(e[91]=[i("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):P("",!0)]),n(y,{message:s(t).errors["citizen.polling_station_id"],class:"mt-2"},null,8,["message"])]),i("div",fi,[n(b,{for:"polling_stream_id"},{default:f(()=>e[92]||(e[92]=[p(" Polling Stream ")])),_:1,__:[92]}),i("div",_i,[V(i("select",{id:"polling_stream_id","onUpdate:modelValue":e[29]||(e[29]=l=>s(t).citizen.polling_stream_id=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",disabled:!s(t).citizen.polling_station_id||ke.value},[e[93]||(e[93]=i("option",{value:""}," Select Polling Stream ",-1)),(E=u.value)!=null&&E.polling_stream&&u.value.polling_stream.polling_station_id==s(t).citizen.polling_station_id?(a(),d("option",{value:u.value.polling_stream_id,key:"current-stream-"+u.value.polling_stream_id},x(u.value.polling_stream.name),9,yi)):P("",!0),(a(!0),d(O,null,$(de.value,l=>{var g;return a(),d("option",{key:l.id,value:l.id,disabled:((g=u.value)==null?void 0:g.polling_stream_id)===l.id},x(l.name),9,bi)}),128))],8,vi),[[I,s(t).citizen.polling_stream_id]]),ke.value?(a(),d("div",xi,e[94]||(e[94]=[i("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):P("",!0)]),n(y,{message:s(t).errors["citizen.polling_stream_id"],class:"mt-2"},null,8,["message"])])])],512),[[R,U.value==="location"]])])])]}),actions:f(()=>[n(Ne,{on:s(t).recentlySuccessful,class:"me-3"},{default:f(()=>e[95]||(e[95]=[p(" Saved. ")])),_:1,__:[95]},8,["on"]),n(Me,{class:F({"opacity-25":s(t).processing}),disabled:s(t).processing},{default:f(()=>e[96]||(e[96]=[p(" Save ")])),_:1,__:[96]},8,["class","disabled"])]),_:1}),H.value?(a(),d("div",wi,[i("div",ki,[i("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:e[30]||(e[30]=Y(r=>H.value=!1,["self"]))}),i("div",hi,[i("button",{type:"button",onClick:e[31]||(e[31]=r=>H.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-200 focus:outline-none",disabled:A.value},e[97]||(e[97]=[i("span",{class:"sr-only"},"Close",-1),i("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,zi),i("div",Vi,[e[101]||(e[101]=i("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-indigo-100 dark:bg-indigo-900 sm:mx-0 sm:h-10 sm:w-10"},[i("svg",{class:"h-6 w-6 text-indigo-600 dark:text-indigo-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),i("div",Ci,[i("h3",Si," Verify "+x(s(C).field_to_verify==="email"?"Email Address":"Phone Number"),1),i("div",Pi,[i("p",Bi,[e[98]||(e[98]=p(" We've sent a 6-digit verification code to: ")),i("span",Ei,x(s(C).field_to_verify==="email"?s(t).email:o.formatPhoneNumberForDisplay(s(C).new_value)),1)]),i("div",Oi,[e[100]||(e[100]=i("label",{for:"otp",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Enter verification code ",-1)),i("div",$i,[(a(),d(O,null,$(6,r=>V(i("input",{key:r,"onUpdate:modelValue":c=>o.otpDigits[r-1]=c,onInput:c=>o.onOtpInput(c,r-1),onKeydown:De(c=>o.onOtpKeyDown(c,r-1),["delete"]),onPaste:e[32]||(e[32]=Y(c=>o.onOtpPaste(c),["prevent"])),type:"tel",maxlength:"1",pattern:"[0-9]",inputmode:"numeric",autocomplete:"one-time-code",disabled:A.value,class:F(["w-full h-14 text-2xl text-center font-semibold text-gray-900 dark:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50",{"border-red-500":o.otpError}])},null,42,Ti),[[ze,o.otpDigits[r-1]]])),64))]),o.otpError?(a(),d("p",Ii,x(o.otpError),1)):P("",!0),i("div",Li,[o.otpResendEnabled?(a(),d("button",{key:1,type:"button",class:"text-sm font-medium text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300 focus:outline-none disabled:opacity-50",onClick:e[33]||(e[33]=(...r)=>o.resendOtp&&o.resendOtp(...r)),disabled:!o.otpResendEnabled||A.value}," Resend code ",8,Ui)):(a(),d("p",Di,[e[99]||(e[99]=p(" Didn't receive a code? Resend in ")),i("span",Ni,x(Math.floor(o.otpCountdown/60))+":"+x((o.otpCountdown%60).toString().padStart(2,"0")),1)]))])])])])]),i("div",Mi,[i("button",{type:"button",class:F(["w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-3 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-150",{"opacity-75 cursor-not-allowed":o.otpDigits.join("").length!==6||A.value}]),onClick:e[34]||(e[34]=r=>pe(o.otpDigits.join(""))),disabled:o.otpDigits.join("").length!==6||A.value},[A.value?(a(),d("span",qi,e[102]||(e[102]=[i("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),p(" Verifying... ")]))):(a(),d("span",Ai,"Verify Now"))],10,ji),i("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-3 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-150",onClick:e[35]||(e[35]=r=>H.value=!1),disabled:A.value}," Cancel ",8,Fi)]),e[103]||(e[103]=i("div",{class:"mt-4 text-center"},[i("p",{class:"text-xs text-gray-500 dark:text-gray-400"},[p(" Having trouble? Contact support at "),i("a",{href:"mailto:support@forwardkenyaparty.com",class:"text-indigo-600 dark:text-indigo-400 hover:underline"},"support@forwardkenyaparty.com"),p(" or call +254 700 000 000 ")])],-1))])])])):P("",!0)],64))}};export{eo as default};
